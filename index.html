 <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Orbisyn Navbar Enhanced</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<!-- Moment.js with Timezone support -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.43/moment-timezone-with-data.min.js"></script>
<style>
  *, *::before, *::after { box-sizing: border-box; }
  body {
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    background: #f8f9fb;
    margin: 0;
    color: #222;
  }
  a {
    color: inherit;
    text-decoration: none;
  }
  ul {
    list-style: none;
    margin: 0;
    padding: 0;
  }
  button {
    font-family: inherit;
    border: none;
    background: none;
    cursor: pointer;
    color: inherit;
  }

  .header {
    position: sticky;
    top: 0;
    background: #fff;
    border-bottom: 1px solid #bebebe;
    box-shadow: 0 2px 7px rgba(0,0,0,0.04);
    z-index: 1000;
  }
  .navbar-container {
    max-width: 1280px;
    margin: 0 auto;
    padding: 0.6rem 1.5rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 1rem;
    flex-wrap: wrap;
  }
  .logo {
    font-weight: 800;
    font-size: 1.5rem;
    color: #111;
    letter-spacing: 1.1px;
    user-select: none;
    cursor: pointer;
    pointer-events: auto;
  }
  /* no hover/focus animation on logo */
  .nav {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    flex-wrap: wrap;
  }
  .nav > li {
    position: relative;
  }
  .nav-link,
  .nav > li > a {
    font-weight: 600;
    font-size: 1rem;
    padding: 0.6rem 1.3rem;
    border-radius: 0;
    position: relative;
    line-height: 1.2;
    color: #222;
    transition: color 0.27s;
    background: transparent;
  }

  /* Header avatar for logged-in state */
  .nav-profile-btn {
    padding: 0.3rem 0.6rem;
  }
  .header-avatar {
    width: 34px;
    height: 34px;
    border-radius: 50%;
    overflow: hidden;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    background: #eee;
    border: 2px solid transparent;
  }
  .header-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }
  .header-avatar[data-role="employer"] { border-color: #28a745; }
  .header-avatar[data-role="employee"] { border-color: #17a2b8; }

  /* Remove underline for profile button and add gradient halo on hover */
  .nav-profile-btn { position: relative; }
  .nav-profile-btn::after { content: none !important; }
  .nav-profile-btn:hover::after,
  .nav-profile-btn:focus-visible::after { width: 0 !important; }
  .nav-profile-btn .header-avatar { position: relative; z-index: 1; }
  .nav-profile-btn .header-avatar::before {
    content: "";
    position: absolute;
    inset: -6px;
    border-radius: 50%;
    background: conic-gradient(
      from 0deg,
      #ff6b6b,
      #f06595,
      #845ef7,
      #339af0,
      #22b8cf,
      #20c997,
      #94d82d,
      #fcc419,
      #ff6b6b
    );
    filter: blur(8px);
    opacity: 0;
    transform: scale(0.9);
    transition: opacity 0.25s ease, transform 0.25s ease;
    z-index: -1;
  }
  .nav-profile-btn:hover .header-avatar::before,
  .nav-profile-btn:focus-visible .header-avatar::before {
    opacity: 0.9;
    transform: scale(1);
  }

  .nav-link:hover,
  .nav-link:focus-visible,
  .nav > li > a:hover,
  .nav > li > a:focus-visible {
    color: #000;
    outline: none;
  }
  .nav-link::after,
  .nav > li > a::after {
    content: "";
    position: absolute;
    left: 0;
    bottom: 5px;
    width: 0%;
    height: 2px;
    background-color: #000;
    transition: width 0.3s;
    border-radius: 1px;
  }
  .nav-link:hover::after,
  .nav-link:focus-visible::after,
  .nav > li > a:hover::after,
  .nav > li > a:focus-visible::after {
    width: 100%;
  }

  /* Let’s Get Started button - Uiverse style applied */
  .get-started-btn.button {
    position: relative;
    transition: all 0.3s ease-in-out;
    box-shadow: 0px 10px 20px rgba(0, 0, 0, 0.2);
    padding-block: 0.5rem;
    padding-inline: 1.25rem;
    background-color: var(--brand-primary, #000);
    border-radius: 9999px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    color: #fff;
    gap: 10px;
    font-weight: 700;
    border: 3px solid #ffffff4d;
    outline: none;
    overflow: hidden;
    font-size: 15px;
  }
  .get-started-btn .icon {
    width: 24px;
    height: 24px;
    transition: all 0.3s ease-in-out;
    font-size: 20px;
  }
  .get-started-btn.button:hover {
    transform: scale(1.05);
    border-color: #fff9;
  }
  .get-started-btn.button:hover .icon {
    transform: translate(4px);
  }
  .get-started-btn.button:hover::before {
    animation: shine 1.5s ease-out infinite;
  }
  .get-started-btn.button::before {
    content: "";
    position: absolute;
    width: 100px;
    height: 100%;
    background-image: linear-gradient(
      120deg,
      rgba(255, 255, 255, 0) 30%,
      rgba(255, 255, 255, 0.8),
      rgba(255, 255, 255, 0) 70%
    );
    top: 0;
    left: -100px;
    opacity: 0.6;
  }
  @keyframes shine {
    0% { left: -100px; }
    60% { left: 100%; }
    100% { left: 100%; }
  }

  /* Login button style */
  .login-btn {
    background: transparent;
    color: #000;
    border: 2px solid transparent;
    padding: 0.5rem 1.4rem;
    border-radius: 7px;
    font-weight: 600;
    font-size: 1rem;
    cursor: pointer;
    transition: background-color 0.3s, border-color 0.3s, color 0.3s;
    margin-left: 0.4rem;
    white-space: nowrap;
  }
  .login-btn:hover,
  .login-btn:focus-visible {
    background: #000;
    color: white;
    border-color: #000;
    outline: none;
  }

  /* Login state management */
  .before-login {
    display: block;
  }
  .after-login {
    display: none;
  }
  .logged-in .before-login {
    display: none;
  }
  .logged-in .after-login {
    display: block;
  }



  /* Mega dropdown style */
  .dropdown {
    position: absolute;
    top: calc(100% + 0.35rem);
    left: 0;
    background: white;
    border-radius: 10px;
    box-shadow: 0 15px 30px rgba(0,0,0,0.15);
    min-width: 280px;
    max-width: 320px;
    opacity: 0;
    pointer-events: none;
    padding: 1.25rem 1.5rem;
    transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 50;
  }
  .dropdown.open { opacity: 1; pointer-events: auto; }
  .dropdown-section { margin-bottom: 1.2rem; }
  .dropdown-section:last-child { margin-bottom: 0; }
  .dropdown-title {
    font-weight: 700;
    color: #111;
    margin-bottom: 0.75rem;
    font-size: 1.05rem;
  }
  .dropdown a {
    font-weight: 500;
    padding: 0.2rem 0;
    display: block;
    color: #222;
    position: relative;
    background: transparent;
    font-size: 0.95rem;
    border-radius: 0;
    transition: color 0.25s;
  }
  .dropdown a:hover, .dropdown a:focus-visible {
    color: #000;
    outline: none;
  }
  .dropdown a::after {
    content: "";
    position: absolute;
    left: 0;
    bottom: 3px;
    width: 0%;
    height: 2px;
    background-color: #000;
    transition: width 0.3s;
    border-radius: 1px;
  }
  .dropdown a:hover::after, .dropdown a:focus-visible::after {
    width: 100%;
  }
  .menu-toggle {
    display: none;
    font-size: 2.2rem;
    line-height: 1;
    cursor: pointer;
    border-radius: 6px;
    color: #111;
    transition: background-color 0.23s;
    padding: 0.3rem 0.65rem 0.25rem 0.65rem;
  }
  .menu-toggle:hover, .menu-toggle:focus-visible {
    background-color: #eee;
    outline-offset: 2px;
    outline: 2px solid #666;
  }
  .nav-and-cta {
    display: flex;
    align-items: center;
    gap: 1rem;
    flex-wrap: wrap;
  }
  @media (max-width: 1024px) {
    .nav {
      display: none;
      position: fixed; /* fixed overlay menu */
      left: 0; right: 0;
      top: var(--mobile-nav-top, 0); /* JS sets this to header bottom */
      bottom: 0;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
      flex-direction: column;
      gap: 0;
      background: #fff;
      box-shadow: 0 12px 30px rgba(0,0,0,0.12);
      padding: 1rem 0 2rem;
      z-index: 999; /* below header z-index 1000 */
    }
    .nav.show { display: flex; }
    .nav > li { width: 100%; }
    .nav-link, .nav > li > a {
      padding: 1rem 1.25rem;
      width: 100%;
      text-align: left;
      border-radius: 0;
    }
    .dropdown {
      position: static;
      display: none; /* hide by default on mobile */
      opacity: 1 !important;
      pointer-events: auto !important;
      max-height: none !important;
      padding-left: 1.25rem;
      margin-bottom: 0.5rem;
      box-shadow: none;
      border-radius: 0;
      max-width: 100% !important;
    }
    /* Show the chosen top-level menu */
    .nav > li.open > .dropdown { display: block; }

    /* Submenu inside dropdowns (e.g., Contact Support ▾) */
    .dropdown button[aria-controls] + .dropdown { display: none; }
    .dropdown button[aria-expanded="true"] + .dropdown { display: block; }

    .dropdown-section { margin-bottom: 1rem; }
    .dropdown a { padding-left: 0.5rem; }
    .menu-toggle { display: block; margin-left: auto; }
    .get-started-btn {
      width: 100%;
      text-align: center;
      padding: 1rem 0;
      font-size: 1.15rem;
      margin-top: 0.5rem;
      border-radius: 28px;
    }

    /* Lock body when menu open to avoid shifting */
    body.nav-open {
      position: fixed;
      width: 100%;
      overflow: hidden;
    }
  }

  /* Multi-Step Form Modal Styles */
  .form-backdrop {
    position: fixed;
    inset: 0;
    z-index: 1001;
    background: rgba(0,0,0,0.25);
    backdrop-filter: blur(1.5px);
    display: none;
    align-items: center;
    justify-content: center;
  }
  .form-backdrop.show {
    display: flex;
  }
  .glass-card {
    background: rgba(255,255,255,0.98);
    border-radius: 1.3em;
    box-shadow: 
      0 12px 38px 0 rgba(0,0,0,0.15), 
      0 1.5px 6px rgba(0,0,0,0.08);
    padding: 2.5rem 2.5rem 2.5rem 2.5rem;
    max-width: 320px;
    width: 90vw;
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }
  .close-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    background: rgba(0,0,0,0.05);
    border: none;
    font-size: 1.1rem;
    color: #666;
    width: 1.8rem; height: 1.8rem;
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    cursor: pointer;
    transition: background 0.17s, color 0.17s;
    z-index: 2;
  }
  .close-btn:hover, .close-btn:focus-visible {
    background: #e9ecef;
    color: #111;
    outline: none;
  }
  .progress-container {
    margin: 0 0 1.8rem 0;
    position: relative;
  }
  .progress-bar-wrapper {
    position: relative;
    width: 100%;
    height: 5px;
    background: #e9ecef;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
  }
  .progress-bar-fill {
    width: 0%;
    height: 100%;
    background: linear-gradient(90deg, #000 0%, #333 100%);
    border-radius: 8px;
    transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
  }
  .progress-bar-fill::after {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 6px;
    height: 100%;
    background: #000;
    border-radius: 0 8px 8px 0;
    box-shadow: 0 0 6px rgba(0,0,0,0.3);
  }
  .progress-steps {
    display: flex;
    justify-content: space-between;
    margin-top: 0.7rem;
    position: relative;
  }
  .progress-step {
    display: flex;
    flex-direction: column;
    align-items: center;
    font-size: 0.8rem;
    color: #999;
    font-weight: 600;
    position: relative;
  }
  .progress-step::before {
    content: attr(data-num);
    width: 22px;
    height: 22px;
    border-radius: 50%;
    background: #e9ecef;
    color: #999;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 0.75rem;
    margin-bottom: 0.3rem;
    border: 2px solid transparent;
    transition: all 0.3s ease;
  }
  .progress-step.active::before {
    background: #000;
    color: #fff;
    border-color: #000;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  }
  .progress-step.active {
    color: #000;
  }
  .form-title {
    font-weight: 800;
    font-size: 1.2rem;
    color: #111;
    letter-spacing: 0.01em;
    margin: 0 0 0.4rem 0;
    text-align: center;
    user-select: none;
  }
  .form-description {
    font-size: 0.9rem;
    margin-bottom: 1.8rem;
    color: #555;
    text-align: center;
    line-height: 1.4;
    user-select: none;
  }
  .form-fields {
    display: flex;
    flex-direction: column;
    gap: 1.3rem;
    margin-bottom: 1.8rem;
  }
  .input-wrap {
    width: 100%;
  }
  .form-input {
    width: 100%;
    padding: 0.9rem 1.1rem;
    border: none;
    border-radius: 999px;
    background: #f8f9fa;
    font-size: 0.95rem;
    font-weight: 500;
    color: #111;
    box-shadow:
      0 1.5px 9px -4px rgba(0,0,0,0.12),
      0 1px 2px #fff;
    margin-top: 0.2em;
    margin-bottom: 0.1em;
    transition: box-shadow 0.23s, background 0.23s, border 0.23s;
    outline: none;
    border: 2px solid transparent;
    box-sizing: border-box;
  }
  .form-input::placeholder {
    color: #aaa;
    font-weight: 400;
    opacity: 1;
    font-size: 0.95rem;
  }
  .form-input:focus {
    background: #fff;
    border-color: #000;
    box-shadow: 0 0 0 3px rgba(0,0,0,0.1), 0 1.5px 9px -4px rgba(0,0,0,0.2);
  }
  .form-label {
    display: block;
    font-size: 0.9rem;
    font-weight: 600;
    color: #333;
    margin-left: 0.2em;
    margin-bottom: 0.3em;
    letter-spacing: 0.005em;
  }
  .form-next-btn {
    width: 100%;
    display: block;
    background: linear-gradient(90deg, #000 0%, #333 100%);
    color: #fff;
    padding: 0.9rem;
    font-weight: 800;
    font-size: 1rem;
    border: none;
    border-radius: 999px;
    cursor: pointer;
    box-shadow: 0 6px 20px rgba(0,0,0,0.15);
    opacity: 0.46;
    margin-top: 0.4rem;
    transition: background 0.19s, box-shadow 0.19s, opacity 0.19s, transform 0.15s;
  }
  .form-next-btn:enabled {
    opacity: 1;
  }
  .form-next-btn:hover:enabled, .form-next-btn:focus-visible:enabled {
    background: linear-gradient(90deg, #111 10%, #000 90%);
    box-shadow: 0 8px 28px rgba(0,0,0,0.25);
    transform: translateY(-1px) scale(1.015);
    outline: none;
  }
  .step-content {
    display: none;
  }
  .step-content.active {
    display: block;
  }
  .thank-you-text {
    font-size: 1rem;
    font-weight: 700;
    color: #111;
    text-align: center;
    padding: 1.8rem 0.5rem;
    user-select: none;
    line-height: 1.4;
  }
  .privacy-note {
    font-size: 0.75rem;
    color: #666;
    margin-top: 1.8rem;
    text-align: center;
    user-select: none;
    letter-spacing: .008em;
  }
  @media (max-width: 560px) {
    .glass-card {
      padding: 2rem 2rem 2rem 2rem;
      max-width: 95vw;
    }
  }

  /* Chaotic Orbit Loader Animation */
  .chaotic-orbit {
    --uib-size: 35px;
    --uib-speed: 1.5s;
    --uib-color: #007bff;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    height: var(--uib-size);
    width: var(--uib-size);
    animation: rotate936 calc(var(--uib-speed) * 1.667) infinite linear;
  }

  .chaotic-orbit::before,
  .chaotic-orbit::after {
    content: '';
    position: absolute;
    height: 60%;
    width: 60%;
    border-radius: 50%;
    background-color: var(--uib-color);
    will-change: transform;
    flex-shrink: 0;
  }

  .chaotic-orbit::before {
    animation: orbit var(--uib-speed) linear infinite;
  }

  .chaotic-orbit::after {
    animation: orbit var(--uib-speed) linear calc(var(--uib-speed) / -2) infinite;
  }

  @keyframes rotate936 {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  @keyframes orbit {
    0% { transform: translate(calc(var(--uib-size) * 0.5)) scale(0.73684); opacity: 0.65; }
    5% { transform: translate(calc(var(--uib-size) * 0.4)) scale(0.684208); opacity: 0.58; }
    10% { transform: translate(calc(var(--uib-size) * 0.3)) scale(0.631576); opacity: 0.51; }
    15% { transform: translate(calc(var(--uib-size) * 0.2)) scale(0.578944); opacity: 0.44; }
    20% { transform: translate(calc(var(--uib-size) * 0.1)) scale(0.526312); opacity: 0.37; }
    25% { transform: translate(0%) scale(0.47368); opacity: 0.3; }
    30% { transform: translate(calc(var(--uib-size) * -0.1)) scale(0.526312); opacity: 0.37; }
    35% { transform: translate(calc(var(--uib-size) * -0.2)) scale(0.578944); opacity: 0.44; }
    40% { transform: translate(calc(var(--uib-size) * -0.3)) scale(0.631576); opacity: 0.51; }
    45% { transform: translate(calc(var(--uib-size) * -0.4)) scale(0.684208); opacity: 0.58; }
    50% { transform: translate(calc(var(--uib-size) * -0.5)) scale(0.73684); opacity: 0.65; }
    55% { transform: translate(calc(var(--uib-size) * -0.4)) scale(0.789472); opacity: 0.72; }
    60% { transform: translate(calc(var(--uib-size) * -0.3)) scale(0.842104); opacity: 0.79; }
    65% { transform: translate(calc(var(--uib-size) * -0.2)) scale(0.894736); opacity: 0.86; }
    70% { transform: translate(calc(var(--uib-size) * -0.1)) scale(0.947368); opacity: 0.93; }
    75% { transform: translate(0%) scale(1); opacity: 1; }
    80% { transform: translate(calc(var(--uib-size) * 0.1)) scale(0.947368); opacity: 0.93; }
    85% { transform: translate(calc(var(--uib-size) * 0.2)) scale(0.894736); opacity: 0.86; }
    90% { transform: translate(calc(var(--uib-size) * 0.3)) scale(0.842104); opacity: 0.79; }
    95% { transform: translate(calc(var(--uib-size) * 0.4)) scale(0.789472); opacity: 0.72; }
    100% { transform: translate(calc(var(--uib-size) * 0.5)) scale(0.73684); opacity: 0.65; }
  }

  /* Main Screen Loading Overlay */
  .main-loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(248, 249, 251, 0.98);
    backdrop-filter: blur(8px);
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 2000;
    transition: all 0.4s ease;
  }

  .main-loading-overlay.show {
    display: flex;
  }

  .main-loading-content {
    text-align: center;
    padding: 3rem;
    background: rgba(255, 255, 255, 0.95);
    border-radius: 1.5rem;
    box-shadow: 
      0 20px 60px rgba(0, 0, 0, 0.15),
      0 8px 25px rgba(0, 0, 0, 0.08);
    max-width: 400px;
    width: 90vw;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
  }

  .main-loading-message {
    margin-top: 2rem;
    font-size: 1.3rem;
    font-weight: 700;
    color: #111;
    line-height: 1.4;
    letter-spacing: 0.02em;
  }

  .main-loading-submessage {
    margin-top: 1rem;
    font-size: 1rem;
    color: #555;
    line-height: 1.4;
    font-weight: 500;
  }

  .main-loading-progress {
    margin-top: 2rem;
    width: 280px;
    height: 6px;
    background: #e9ecef;
    border-radius: 3px;
    overflow: hidden;
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
  }

  .main-loading-progress-bar {
    height: 100%;
    background: linear-gradient(90deg, #007bff, #0056b3);
    border-radius: 3px;
    width: 0%;
    transition: width 0.4s ease;
    animation: progressPulse 2s ease-in-out infinite;
    position: relative;
  }

  .main-loading-progress-bar::after {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 8px;
    height: 100%;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 0 3px 3px 0;
    animation: progressShine 2s ease-in-out infinite;
  }

  @keyframes progressShine {
    0%, 100% { opacity: 0; }
    50% { opacity: 1; }
  }

  /* Responsive adjustments for main loader */
  @media (max-width: 768px) {
    .main-loading-content {
      padding: 2rem;
      max-width: 95vw;
    }
    
    .main-loading-message {
      font-size: 1.1rem;
    }
    
    .main-loading-progress {
      width: 240px;
    }
  }

  /* Login Loading State (Simplified for modal) */
  .login-loading-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255, 255, 255, 0.98);
    backdrop-filter: blur(4px);
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 10;
    border-radius: 1.2em;
    transition: all 0.3s ease;
  }

  .login-loading-overlay.show {
    display: flex;
  }

  .login-loading-content {
    text-align: center;
    padding: 2rem;
  }

  .login-loading-message {
    margin-top: 1.5rem;
    font-size: 1rem;
    font-weight: 600;
    color: #333;
    line-height: 1.4;
  }

  .login-loading-submessage {
    margin-top: 0.8rem;
    font-size: 0.85rem;
    color: #666;
    line-height: 1.3;
  }

  .login-loading-progress {
    margin-top: 1rem;
    width: 200px;
    height: 4px;
    background: #e9ecef;
    border-radius: 2px;
    overflow: hidden;
  }

  .login-loading-progress-bar {
    height: 100%;
    background: linear-gradient(90deg, #007bff, #0056b3);
    border-radius: 2px;
    width: 0%;
    transition: width 0.3s ease;
    animation: progressPulse 2s ease-in-out infinite;
  }

  @keyframes progressPulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
  }

  /* Enhanced Demo Button Styles for Loader */
  .demo-btn {
    background: linear-gradient(90deg, #000 0%, #333 100%);
    color: #fff;
    padding: 0.8rem;
    font-weight: 600;
    font-size: 0.9rem;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    box-shadow: 0 3px 8px rgba(0,0,0,0.15);
    transition: background 0.19s, box-shadow 0.19s, transform 0.15s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.4rem;
  }

  .demo-btn:hover {
    background: linear-gradient(90deg, #111 10%, #000 90%);
    box-shadow: 0 4px 12px rgba(0,0,0,0.25);
    transform: translateY(-1px);
  }

  .status {
    margin-top: 1rem;
    font-size: 0.8rem;
    color: #666;
    padding: 0.6rem;
    background: #f8f9fa;
    border-radius: 6px;
    border: 1px solid #e9ecef;
    transition: all 0.3s ease;
  }

  /* Tools Button and Panel Styles */
  .tools-btn {
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    background: linear-gradient(135deg, #007bff, #0056b3);
    color: white;
    border: none;
    border-radius: 50px;
    padding: 1rem 1.5rem;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    box-shadow: 0 8px 25px rgba(0, 123, 255, 0.3);
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    z-index: 1500;
    user-select: none;
  }

  .tools-btn:hover {
    background: linear-gradient(135deg, #0056b3, #004085);
    box-shadow: 0 12px 35px rgba(0, 123, 255, 0.4);
    transform: translateY(-2px) scale(1.05);
  }

  .tools-panel {
    position: fixed;
    top: 0;
    right: -450px;
    width: 420px;
    height: 100vh;
    background: rgba(255, 255, 255, 0.98);
    backdrop-filter: blur(10px);
    box-shadow: -5px 0 25px rgba(0, 0, 0, 0.15);
    z-index: 1600;
    transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    overflow-y: auto;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
  }

  .tools-panel.show {
    right: 0;
  }

  .tools-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.5rem;
    border-bottom: 1px solid #e9ecef;
    background: rgba(248, 249, 251, 0.8);
    backdrop-filter: blur(5px);
  }

  .tools-title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 1.2rem;
    font-weight: 700;
    color: #111;
  }

  .tools-close {
    background: rgba(0, 0, 0, 0.05);
    border: none;
    border-radius: 50%;
    width: 2.5rem;
    height: 2.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    color: #666;
  }

  .tools-close:hover {
    background: rgba(0, 0, 0, 0.1);
    color: #111;
    transform: scale(1.1);
  }

  .tools-content {
    padding: 1.5rem;
  }

  .tools-section {
    margin-bottom: 2rem;
  }

  .tools-section:last-child {
    margin-bottom: 0;
  }

  .tools-section-title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 1rem;
    font-weight: 700;
    color: #333;
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid #e9ecef;
  }

  /* Credentials Grid */
  .cred-grid {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .cred-card {
    background: rgba(248, 249, 251, 0.8);
    border: 1px solid #e9ecef;
    border-radius: 12px;
    padding: 1rem;
    transition: all 0.2s ease;
  }

  .cred-card:hover {
    background: rgba(240, 242, 245, 0.9);
    border-color: #007bff;
    box-shadow: 0 4px 12px rgba(0, 123, 255, 0.1);
  }

  .cred-card-title {
    font-size: 0.9rem;
    font-weight: 700;
    color: #007bff;
    margin-bottom: 0.8rem;
    text-align: center;
  }

  .cred-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
  }

  .cred-item:last-child {
    margin-bottom: 0;
  }

  .cred-label {
    font-size: 0.8rem;
    font-weight: 600;
    color: #666;
  }

  .cred-value {
    font-size: 0.8rem;
    font-weight: 500;
    color: #111;
    background: rgba(255, 255, 255, 0.8);
    padding: 0.3rem 0.6rem;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s ease;
    border: 1px solid transparent;
  }

  .cred-value:hover {
    background: #007bff;
    color: white;
    border-color: #0056b3;
    transform: scale(1.05);
  }

  /* Loader Test Buttons Grid */
  .loader-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0.8rem;
  }

  .loader-test-btn {
    background: linear-gradient(135deg, #f8f9fa, #e9ecef);
    border: 1px solid #dee2e6;
    border-radius: 10px;
    padding: 1rem;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.8rem;
    font-weight: 600;
    color: #495057;
  }

  .loader-test-btn:hover {
    background: linear-gradient(135deg, #007bff, #0056b3);
    color: white;
    border-color: #0056b3;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 123, 255, 0.3);
  }

  .loader-test-btn .material-icons {
    font-size: 1.5rem;
  }

  /* Responsive adjustments for tools panel */
  @media (max-width: 768px) {
    .tools-panel {
      width: 100vw;
      right: -100vw;
    }
    
    .tools-btn {
      bottom: 1rem;
      right: 1rem;
      padding: 0.8rem 1.2rem;
      font-size: 0.9rem;
    }
    
    .loader-grid {
      grid-template-columns: 1fr;
    }
  }

  /* Profile Modal Styles */
  .profile-modal {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.5);
    backdrop-filter: blur(2px);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 1700;
  }
  .profile-modal.show {
    display: flex;
  }
  .profile-modal .modal-content {
    background: #fff;
    border-radius: 16px;
    max-width: 900px;
    width: 90vw;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 20px 40px rgba(0,0,0,0.2);
    position: relative;
    scrollbar-width: none; /* Firefox: hide scrollbar visuals */
  }
  .profile-modal .modal-content::-webkit-scrollbar { display: none; }
  .profile-modal .modal-header {
    padding: 2rem 2rem 1rem;
    border-bottom: 1px solid #e9ecef;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .profile-modal .modal-title {
    font-size: 1.4rem;
    font-weight: 700;
    color: #111;
    margin: 0;
  }
  .profile-modal .header-actions {
    display: flex;
    gap: 0.5rem;
    align-items: center;
  }
  .profile-modal .mode-toggle {
    background: #f8f9fa;
    border: 1px solid #e9ecef;
    padding: 0.4rem 0.8rem;
    border-radius: 6px;
    font-size: 0.85rem;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 0.3rem;
  }
  .profile-modal .mode-toggle:hover {
    background: #e9ecef;
  }
  .profile-modal .close-btn {
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: #666;
    padding: 0.5rem;
    border-radius: 50%;
    transition: background 0.2s;
  }
  .profile-modal .close-btn:hover {
    background: #f8f9fa;
    color: #111;
  }
  .profile-modal .modal-body {
    padding: 2rem;
  }
  .profile-modal .view-mode {
    display: none;
  }
  .profile-modal .view-mode.active {
    display: block;
  }
  .profile-modal .edit-mode {
    display: block;
  }
  .profile-modal .edit-mode.hidden {
    display: none;
  }
  .profile-modal .profile-header {
    display: flex;
    align-items: center;
    gap: 2rem;
    margin-bottom: 2rem;
    padding: 1.5rem;
    background: #f8f9fa;
    border-radius: 12px;
  }
  .profile-modal .profile-avatar {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    border: 4px solid #fff;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #e9ecef;
  }
  .profile-modal .profile-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  .profile-modal .profile-avatar .material-icons {
    font-size: 2.5rem;
    color: #666;
  }
  .profile-modal .profile-info h3 {
    margin: 0 0 0.5rem 0;
    font-size: 1.5rem;
    font-weight: 700;
    color: #111;
  }
  .profile-modal .profile-info p {
    margin: 0.2rem 0;
    color: #666;
    font-size: 0.9rem;
  }
  .profile-modal .info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
  }
  .profile-modal .info-card {
    background: #fff;
    border: 1px solid #e9ecef;
    border-radius: 8px;
    padding: 1.2rem;
  }
  .profile-modal .info-card-title {
    font-weight: 600;
    color: #333;
    margin-bottom: 0.8rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.95rem;
  }
  .profile-modal .info-card-content {
    color: #666;
    font-size: 0.9rem;
  }
  .profile-modal .timezone-info-card {
    background: #f0f8ff;
    border: 1px solid #b3d9ff;
    padding: 0.8rem;
    border-radius: 6px;
    margin-top: 0.5rem;
  }
  .profile-modal .timezone-current-time {
    font-weight: 600;
    color: #1565c0;
    margin-bottom: 0.3rem;
  }
  .profile-modal .timezone-details {
    font-size: 0.8rem;
    color: #666;
  }
  .profile-modal .photo-section {
    text-align: center;
    margin-bottom: 2rem;
  }
  .profile-modal .profile-photo {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    border: 4px solid #e9ecef;
    margin: 0 auto 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #f8f9fa;
    overflow: hidden;
    position: relative;
  }
  .profile-modal .profile-photo img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  .profile-modal .profile-photo .material-icons {
    font-size: 3rem;
    color: #666;
  }
  .profile-modal .upload-btn {
    background: #333;
    color: #fff;
    border: none;
    padding: 0.6rem 1.2rem;
    border-radius: 6px;
    font-size: 0.85rem;
    cursor: pointer;
    transition: background 0.2s;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
  }
  .profile-modal .upload-btn:hover {
    background: #111;
  }
  .profile-modal .file-input {
    display: none;
  }
  .profile-modal .form-section {
    margin-bottom: 2rem;
  }
  .profile-modal .section-title {
    font-size: 1.1rem;
    font-weight: 600;
    color: #333;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  .profile-modal .form-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1rem;
  }
  .profile-modal .form-group.full-width {
    grid-column: 1 / -1;
  }
  .profile-modal .form-group {
    display: flex;
    flex-direction: column;
  }
  .profile-modal .form-group.full-width {
    grid-column: 1 / -1;
  }
  .profile-modal label {
    font-weight: 600;
    font-size: 0.85rem;
    color: #555;
    margin-bottom: 0.4rem;
  }
  .profile-modal input, .profile-modal select, .profile-modal textarea {
    padding: 0.7rem;
    border: 2px solid #e9ecef;
    border-radius: 6px;
    font-size: 0.9rem;
    transition: border-color 0.2s;
    background: #fff;
  }
  .profile-modal input:focus, .profile-modal select:focus, .profile-modal textarea:focus {
    outline: none;
    border-color: #333;
  }
  .profile-modal textarea {
    resize: vertical;
    min-height: 80px;
  }
  .profile-modal .timezone-selector {
    position: relative;
  }
  .profile-modal .timezone-input {
    width: 100%;
    padding: 0.7rem;
    border: 2px solid #e9ecef;
    border-radius: 6px;
    font-size: 0.9rem;
    cursor: pointer;
    background: #fff;
    transition: border-color 0.2s;
  }
  .profile-modal .timezone-input:focus {
    outline: none;
    border-color: #333;
  }
  .profile-modal .timezone-dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: #fff;
    border: 1px solid #e9ecef;
    border-radius: 6px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    max-height: 200px;
    overflow-y: auto;
    z-index: 100;
    display: none;
    scrollbar-width: none;
  }
  .profile-modal .timezone-dropdown::-webkit-scrollbar { display: none; }
  .profile-modal .timezone-dropdown.show {
    display: block;
  }
  .profile-modal .timezone-option {
    padding: 0.7rem;
    cursor: pointer;
    border-bottom: 1px solid #f8f9fa;
    transition: background 0.2s;
  }
  .profile-modal .timezone-option:hover {
    background: #f8f9fa;
  }
  .profile-modal .timezone-option:last-child {
    border-bottom: none;
  }
  .profile-modal .timezone-option .timezone-name {
    font-weight: 600;
    color: #333;
  }
  .profile-modal .timezone-option .timezone-info {
    font-size: 0.8rem;
    color: #666;
    margin-top: 0.2rem;
  }
  .profile-modal .timezone-search {
    padding: 0.5rem;
    border: none;
    border-bottom: 1px solid #e9ecef;
    width: 100%;
    font-size: 0.85rem;
    outline: none;
  }
  .profile-modal .timezone-search::placeholder {
    color: #999;
  }
  .profile-modal .current-time {
    background: #f8f9fa;
    border: 1px solid #e9ecef;
    border-radius: 6px;
    padding: 0.8rem;
    margin-top: 0.5rem;
    font-size: 0.85rem;
  }
  .profile-modal .time-display {
    font-weight: 600;
    color: #333;
    margin-bottom: 0.3rem;
  }
  .profile-modal .time-info {
    color: #666;
    font-size: 0.8rem;
  }
  .profile-modal .tag-container {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-top: 0.5rem;
  }
  .profile-modal .tag {
    background: #f1f3f4;
    color: #333;
    padding: 0.3rem 0.8rem;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 0.3rem;
  }
  .profile-modal .tag.view-mode {
    background: #e3f2fd;
    color: #1565c0;
  }
  .profile-modal .tag.achievement {
    background: #fff3e0;
    color: #ef6c00;
  }
  .profile-modal .tag.certification {
    background: #e8f5e8;
    color: #2e7d32;
  }
  .profile-modal .tag .remove-tag {
    background: none;
    border: none;
    color: #666;
    cursor: pointer;
    padding: 0;
    font-size: 1rem;
    line-height: 1;
  }
  .profile-modal .tag .remove-tag:hover {
    color: #111;
  }
  .profile-modal .add-tag-input {
    border: 1px dashed #ccc;
    background: transparent;
    padding: 0.3rem 0.8rem;
    font-size: 0.8rem;
    border-radius: 20px;
    min-width: 150px;
  }
  .profile-modal .skills-categories {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin-bottom: 1rem;
  }
  .profile-modal .skill-category {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 1rem;
  }
  .profile-modal .category-title {
    font-weight: 600;
    font-size: 0.85rem;
    color: #333;
    margin-bottom: 0.5rem;
  }
  .profile-modal .category-input {
    width: 100%;
    font-size: 0.8rem;
    padding: 0.4rem;
    border: 1px solid #ddd;
    border-radius: 4px;
    margin-bottom: 0.5rem;
  }
  .profile-modal .modal-actions {
    padding: 1rem 2rem 2rem;
    display: flex;
    justify-content: flex-end;
    gap: 1rem;
    border-top: 1px solid #e9ecef;
  }
  .profile-modal .btn {
    padding: 0.7rem 1.5rem;
    border: none;
    border-radius: 6px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
  }
  .profile-modal .btn-secondary {
    background: #f8f9fa;
    color: #666;
    border: 1px solid #e9ecef;
  }
  .profile-modal .btn-secondary:hover {
    background: #e9ecef;
    color: #333;
  }
  .profile-modal .btn-primary {
    background: #333;
    color: #fff;
  }
  .profile-modal .btn-primary:hover {
    background: #111;
  }
  .profile-modal .detect-timezone-btn {
    background: #007bff;
    color: #fff;
    border: none;
    padding: 0.4rem 0.8rem;
    border-radius: 4px;
    font-size: 0.8rem;
    cursor: pointer;
    margin-top: 0.5rem;
    display: inline-flex;
    align-items: center;
    gap: 0.3rem;
    transition: background 0.2s;
  }
  .profile-modal .detect-timezone-btn:hover {
    background: #0056b3;
  }
  @media (max-width: 768px) {
    .profile-modal .modal-content {
      width: 95vw;
      margin: 1rem;
    }
    .profile-modal .modal-body {
      padding: 1rem;
    }
    .profile-modal .form-grid, .profile-modal .info-grid, .profile-modal .skills-categories {
      grid-template-columns: 1fr;
    }
    .profile-modal .profile-header {
      flex-direction: column;
      text-align: center;
    }
    .profile-modal .timezone-dropdown {
      position: fixed;
      left: 1rem;
      right: 1rem;
      top: 50%;
      transform: translateY(-50%);
    }
  }

  /* Login Form Modal Styles */
  .login-backdrop {
    position: fixed;
    inset: 0;
    z-index: 1002;
    background: rgba(0,0,0,0.25);
    backdrop-filter: blur(1.5px);
    display: none;
    align-items: center;
    justify-content: center;
  }
  .login-backdrop.show {
    display: flex;
  }
  .login-card {
    background: rgba(255,255,255,0.98);
    border-radius: 1.2em;
    box-shadow: 
      0 8px 24px 0 rgba(0,0,0,0.12), 
      0 1px 4px rgba(0,0,0,0.06);
    padding: 2rem 2rem 2rem 2rem;
    max-width: 320px;
    width: 85vw;
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }
  .login-close-btn {
    position: absolute;
    top: 12px;
    right: 12px;
    background: rgba(0,0,0,0.05);
    border: none;
    color: #666;
    width: 1.8rem; height: 1.8rem;
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    cursor: pointer;
    transition: background 0.17s, color 0.17s;
    z-index: 2;
  }
  .login-close-btn .material-icons {
    font-size: 1.1rem !important;
  }
  .login-close-btn:hover, .login-close-btn:focus-visible {
    background: #e9ecef;
    color: #111;
    outline: none;
  }
  /* Login Type Toggle */
  .login-toggle {
    display: flex;
    background: #f8f9fa;
    border-radius: 8px;
    padding: 3px;
    margin-bottom: 1.2rem;
    border: 1px solid #e9ecef;
  }
  .toggle-btn {
    flex: 1;
    background: transparent;
    border: none;
    padding: 0.6rem 0.8rem;
    font-weight: 600;
    font-size: 0.8rem;
    color: #666;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s ease;
  }
  .toggle-btn.active {
    background: #000;
    color: #fff;
    box-shadow: 0 1px 4px rgba(0,0,0,0.15);
  }
  .brand-logo {
    text-align: center;
    margin-bottom: 1rem;
  }
  .brand-logo h1 {
    font-size: 1.4rem;
    font-weight: 800;
    color: #111;
    margin: 0;
    letter-spacing: 0.02em;
  }
  .login-title {
    font-weight: 700;
    font-size: 1rem;
    color: #111;
    margin: 0 0 0.8rem 0;
    text-align: center;
  }
  /* Security Warning */
  .security-warning {
    background: #fff8dc;
    border: 1px solid #f0e68c;
    border-radius: 6px;
    padding: 0.6rem;
    margin-bottom: 1rem;
    font-size: 0.75rem;
    color: #b8860b;
  }
  .security-warning .warning-title {
    font-weight: 600;
    margin-bottom: 0.2rem;
    display: flex;
    align-items: center;
    gap: 0.3rem;
  }
  .security-warning .material-icons {
    font-size: 1rem !important;
  }
  .security-warning ul {
    margin: 0.3rem 0 0 0.8rem;
    padding: 0;
  }
  .security-warning li {
    margin-bottom: 0.1rem;
  }
  .login-form-fields {
    display: flex;
    flex-direction: column;
    gap: 0.8rem;
    margin-bottom: 0.8rem;
  }
  .login-input-group {
    position: relative;
  }
  .login-label {
    display: block;
    font-size: 0.8rem;
    font-weight: 600;
    color: #333;
    margin-bottom: 0.3rem;
  }
  .login-input {
    width: 100%;
    padding: 0.8rem 1rem;
    border: 2px solid #e9ecef;
    border-radius: 6px;
    background: #fff;
    font-size: 0.9rem;
    font-weight: 500;
    color: #111;
    transition: border-color 0.23s, box-shadow 0.23s;
    outline: none;
    box-sizing: border-box;
  }
  .login-input[type="password"] {
    padding-right: 2.5rem;
  }
  .login-input:focus {
    border-color: #000;
    box-shadow: 0 0 0 2px rgba(0,0,0,0.1);
  }
  .login-input::placeholder {
    color: #aaa;
    font-weight: 400;
  }
  .password-toggle {
    position: absolute;
    right: 8px;
    top: 60%;
    transform: translateY(-50%);
    background: none;
    border: none;
    color: #666;
    cursor: pointer;
    transition: color 0.2s;
    padding: 4px;
    border-radius: 4px;
  }
  .password-toggle .material-icons {
    font-size: 1.1rem !important;
  }
  .password-toggle:hover {
    color: #000;
    background: rgba(0,0,0,0.05);
  }
  /* Password Guidelines */
  .password-guidelines {
    background: #f8f9fa;
    border: 1px solid #e9ecef;
    border-radius: 6px;
    padding: 0.6rem;
    margin-bottom: 0.8rem;
    font-size: 0.7rem;
    color: #555;
  }
  .password-guidelines .guideline-title {
    font-weight: 600;
    margin-bottom: 0.3rem;
    color: #333;
    display: flex;
    align-items: center;
    gap: 0.3rem;
  }
  .password-guidelines .material-icons {
    font-size: 1rem !important;
  }
  .login-submit-btn {
    width: 100%;
    background: linear-gradient(90deg, #000 0%, #333 100%);
    color: #fff;
    padding: 0.8rem;
    font-weight: 700;
    font-size: 0.9rem;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    box-shadow: 0 3px 8px rgba(0,0,0,0.15);
    margin-bottom: 0.8rem;
    transition: background 0.19s, box-shadow 0.19s, transform 0.15s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.4rem;
  }
  .login-submit-btn .material-icons {
    font-size: 0.9rem !important;
  }
  .login-submit-btn:hover:not(:disabled), .login-submit-btn:focus-visible:not(:disabled) {
    background: linear-gradient(90deg, #111 10%, #000 90%);
    box-shadow: 0 4px 12px rgba(0,0,0,0.25);
    transform: translateY(-1px);
    outline: none;
  }
  .login-submit-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  .error-message, .attempt-warning, .success-message {
    padding: 0.6rem;
    border-radius: 6px;
    font-size: 0.75rem;
    margin-bottom: 0.8rem;
    display: none;
    align-items: center;
    gap: 0.4rem;
  }
  .error-message .material-icons, .attempt-warning .material-icons, .success-message .material-icons {
    font-size: 0.8rem !important;
  }
  .error-message {
    background: #fff5f5;
    border: 1px solid #fed7d7;
    color: #c53030;
  }
  .attempt-warning {
    background: #fef5e7;
    border: 1px solid #f6ad55;
    color: #c05621;
  }
  .success-message {
    background: #f0fff4;
    border: 1px solid #9ae6b4;
    color: #2f855a;
  }
  .error-message.show, .attempt-warning.show, .success-message.show {
    display: flex;
  }
  .form-links {
    display: flex;
    flex-direction: column;
    gap: 0.6rem;
    margin-bottom: 1rem;
  }
  .forgot-links {
    display: flex;
    gap: 0.8rem;
    justify-content: center;
  }
  .login-link {
    color: #000;
    text-decoration: none;
    font-size: 0.8rem;
    font-weight: 500;
    transition: color 0.2s;
    display: flex;
    align-items: center;
    gap: 0.3rem;
  }
  .login-link .material-icons {
    font-size: 1rem !important;
  }
  .login-link:hover {
    color: #333;
    text-decoration: underline;
  }
  .register-section {
    text-align: center;
    padding-top: 1rem;
    border-top: 1px solid #e9ecef;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }
  .register-text {
    font-size: 0.8rem;
    color: #666;
    margin-bottom: 0.3rem;
  }
  .register-description {
    font-size: 0.7rem;
    color: #888;
    line-height: 1.3;
    margin-bottom: 0.6rem;
  }
  /* Terms Notice */
  .terms-notice {
    font-size: 0.65rem;
    color: #888;
    text-align: center;
    margin-top: 0.8rem;
    line-height: 1.2;
    display: flex;
    align-items: flex-start;
    justify-content: center;
    gap: 0.3rem;
  }
  .terms-notice .material-icons {
    font-size: 0.8rem !important;
    margin-top: 0.1rem;
  }
  /* Test Credentials Display */
  .test-credentials {
    position: fixed;
    top: 20px;
    left: 20px;
    background: rgba(0,0,0,0.9);
    color: #fff;
    padding: 1rem;
    border-radius: 8px;
    font-size: 0.75rem;
    max-width: 250px;
    z-index: 1003;
    display: none;
  }
  .test-credentials.show {
    display: block;
  }
  .test-credentials h4 {
    margin: 0 0 0.5rem 0;
    color: #ffd700;
  }
  .test-credentials .cred-section {
    margin-bottom: 0.8rem;
  }
  .test-credentials .cred-title {
    color: #87ceeb;
    font-weight: 600;
    margin-bottom: 0.3rem;
  }
  @media (max-width: 560px) {
    .login-card {
      padding: 1.5rem 1.5rem;
      max-width: 90vw;
    }
    .forgot-links {
      flex-direction: column;
      align-items: center;
      gap: 0.4rem;
    }
    .test-credentials {
      display: none !important;
    }
  }
</style>
</head>
<body>
<header class="header" role="banner">
  <div class="navbar-container">
    <span class="logo" aria-label="Orbisyn Home">Orbisyn</span>
    <button class="menu-toggle" aria-label="Toggle menu" aria-expanded="false" aria-controls="mainNav">&#9776;</button>
    <div class="nav-and-cta">
      <ul class="nav" id="mainNav" role="menubar" aria-label="Primary navigation">

        <!-- Navbar item 1: Features - HR & Payroll -->
        <li role="none">
          <button class="nav-link" aria-haspopup="true" aria-expanded="false" aria-controls="dropdown-hrpayroll" role="menuitem">HR & Payroll</button>
          <div id="dropdown-hrpayroll" role="menu" class="dropdown">
            <div class="dropdown-section">
              <div class="dropdown-title">Payroll Services</div>
              <a href="#">Compare payroll plans</a>
              <a href="#">Small business payroll</a>
            </div>
            <div class="dropdown-section">
              <div class="dropdown-title">Human Resources</div>
              <a href="#">Compare HR plans</a>
              <a href="#">Professional employer organization</a>
              <a href="#">Human Resources overview</a>
            </div>
            <div class="dropdown-section">
              <div class="dropdown-title">Workforce Planning</div>
              <a href="#">Time n attendance</a>
              <a href="#">Time clocks n zones</a>
              <a href="#">HR analytics & reporting</a>
              <a href="#">Workforce planning overview</a>
            </div>
          </div>
        </li>

        <!-- Navbar item 2: Employee Benefits -->
        <li role="none">
          <button class="nav-link" aria-haspopup="true" aria-expanded="false" aria-controls="dropdown-benefits" role="menuitem">Employee Benefits</button>
          <div id="dropdown-benefits" role="menu" class="dropdown">
            <a href="#">Health insurance</a>
            <a href="#">Voluntary benefits</a>
            <a href="#">Workers Compensation</a>
            <a href="#">Employee benefits overview</a>
          </div>
        </li>

        <!-- Navbar item 3: Solutions -->
        <li role="none">
          <button class="nav-link" aria-haspopup="true" aria-expanded="false" aria-controls="dropdown-solutions" role="menuitem">Solutions</button>
          <div id="dropdown-solutions" role="menu" class="dropdown">
            <div class="dropdown-section">
              <div class="dropdown-title">Business size</div>
              <a href="#">Startup</a>
              <a href="#">Self employed</a>
              <a href="#">1-19 employees</a>
              <a href="#">20-49 employees</a>
              <a href="#">Business solution</a>
            </div>
            <div class="dropdown-section">
              <div class="dropdown-title">Industries</div>
              <a href="#">Restaurants n Hospitality</a>
              <a href="#">Professional services</a>
              <a href="#">Retail</a>
              <a href="#">Skilled trades</a>
              <a href="#">Healthcare</a>
              <a href="#">Manufacturing</a>
              <a href="#">Non profits</a>
              <a href="#">All industries</a>
            </div>
            <div class="dropdown-section">
              <a href="#">Full-service hr n benefits</a>
            </div>
          </div>
        </li>

        <!-- Navbar item 4: Resources -->
        <li role="none">
          <button class="nav-link" aria-haspopup="true" aria-expanded="false" aria-controls="dropdown-resources" role="menuitem">Resources</button>
          <div id="dropdown-resources" role="menu" class="dropdown">
            <div class="dropdown-section">
              <div class="dropdown-title">Worx blog</div>
              <a href="#">All content</a>
              <a href="#">Articles</a>
              <a href="#">Guides</a>
            </div>
            <div class="dropdown-section">
              <a href="#">State compliance resourcs</a>
            </div>
            <div class="dropdown-section">
              <div class="dropdown-title">Calc</div>
              <a href="#">Retirement</a>
              <a href="#">Secure act crrdit estimator</a>
              <a href="#">Business expenses calc</a>
              <a href="#">Time calc</a>
              <a href="#">Financial calc</a>
              <a href="#">FSA calc</a>
              <a href="#">FICA tip calc</a>
              <a href="#">SUI calc</a>
            </div>
          </div>
        </li>

        <!-- Navbar item 5: Contact -->
        <li role="none">
          <button class="nav-link" aria-haspopup="true" aria-expanded="false" aria-controls="dropdown-contact" role="menuitem">Contact</button>
          <div id="dropdown-contact" role="menu" class="dropdown">
            <a href="contact-sales.html">Contact sales</a>
            <button class="nav-link" aria-haspopup="true" aria-expanded="false" aria-controls="dropdown-support" style="padding-left: 0;">Contact Support ▾</button>
            <div id="dropdown-support" role="menu" class="dropdown" style="left:100%;top:0;min-width:220px;max-width:240px;">
            </div>
          </div>
        </li>

        <!-- Navbar item 6: About Us -->
        <li role="none">
          <a href="#" class="nav-link" role="menuitem">About Us</a>
        </li>

        <!-- Navbar item 7: Login (before login) -->
        <li role="none" class="before-login">
          <button class="login-btn" role="menuitem">Login</button>
        </li>

        <!-- Navbar item 7: Profile (after login) -->
        <li role="none" class="after-login" style="display: none;">
          <button class="nav-link nav-profile-btn" onclick="openProfileModal()" role="menuitem" aria-label="Open profile">
            <span class="header-avatar" id="headerAvatar">
              <span class="material-icons">person</span>
            </span>
          </button>
        </li>
      </ul>
      
      <!-- Before Login: Get Started Button -->
      <button class="get-started-btn button before-login" id="getStartedBtn" type="button" aria-label="Get started">
        <span>Let’s Get Started</span>
        <span class="material-icons icon" aria-hidden="true">arrow_forward</span>
      </button>
    </div>
  </div>
</header>

<!-- Multi-Step Form Modal -->
<div class="form-backdrop" id="formBackdrop">
  <form class="glass-card" autocomplete="off" onsubmit="return false;">
    <button class="close-btn" type="button" aria-label="Close" id="formCloseBtn">&times;</button>
    <h2 class="form-title">Get Custom Pricing to Fit Your Needs</h2>
    <p class="form-description">3 Months of Free Payroll. Fill out the form below and we'll be in touch shortly.</p>
    <div class="progress-container" aria-hidden="true">
      <div class="progress-bar-wrapper">
        <div class="progress-bar-fill" id="formProgressBarFill"></div>
      </div>
      <div class="progress-steps">
        <div class="progress-step active" data-num="1">Step 1</div>
        <div class="progress-step" data-num="2">Step 2</div>
      </div>
    </div>
    <section class="step-content active" id="formStep1">
      <div class="form-fields">
        <div class="input-wrap">
          <label for="formCompanyName" class="form-label">Company Name</label>
          <input type="text" id="formCompanyName" class="form-input" placeholder="Your company name" autocomplete="organization"/>
        </div>
        <div class="input-wrap">
          <label for="formNumEmployees" class="form-label">Number of Employees</label>
          <input type="number" id="formNumEmployees" class="form-input" placeholder="Enter number" min="1" />
        </div>
      </div>
      <button type="button" class="form-next-btn" id="formToStep2Btn" disabled>Next</button>
    </section>
    <section class="step-content" id="formStep2">
      <p class="thank-you-text">
        Thank you for submitting your info.<br />A representative will reach out shortly to help with your custom pricing.
      </p>
    </section>
    <p class="privacy-note">Your information is private and secure</p>
  </form>
</div>

<!-- Tools Button -->
<button class="tools-btn" id="toolsBtn" onclick="toggleToolsPanel()">
  <span class="material-icons">build</span>
  Tools
</button>

<!-- Tools Panel -->
<div class="tools-panel" id="toolsPanel">
  <div class="tools-header">
    <div class="tools-title">
      <span class="material-icons">build</span>
      Developer Tools
    </div>
    <button class="tools-close" onclick="toggleToolsPanel()">
      <span class="material-icons">close</span>
    </button>
  </div>
  
  <div class="tools-content">
    <!-- Test Credentials Section -->
    <div class="tools-section">
      <div class="tools-section-title">
        <span class="material-icons">key</span>
        Test Credentials
      </div>
      <div class="cred-grid">
        <div class="cred-card">
          <div class="cred-card-title">Employer (OrbiWave)</div>
          <div class="cred-item">
            <span class="cred-label">Email:</span>
            <span class="cred-value" onclick="copyToClipboard('john.smith@techcorp.com')">john.smith@techcorp.com</span>
          </div>
          <div class="cred-item">
            <span class="cred-label">Password:</span>
            <span class="cred-value" onclick="copyToClipboard('TechCorp@2024')">TechCorp@2024</span>
          </div>
        </div>
        <div class="cred-card">
          <div class="cred-card-title">Employee (OrbiFlex)</div>
          <div class="cred-item">
            <span class="cred-label">Username:</span>
            <span class="cred-value" onclick="copyToClipboard('dev_alex_2024')">dev_alex_2024</span>
          </div>
          <div class="cred-item">
            <span class="cred-label">Password:</span>
            <span class="cred-value" onclick="copyToClipboard('DevCode@123')">DevCode@123</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Loader Animations Section -->
    <div class="tools-section">
      <div class="tools-section-title">
        <span class="material-icons">animation</span>
        Test Loader Animations
      </div>
      <div class="loader-grid">
        <button class="loader-test-btn" onclick="testLoader('employerLogin')">
          <span class="material-icons">business</span>
          <span>Employer Login</span>
        </button>
        <button class="loader-test-btn" onclick="testLoader('employeeLogin')">
          <span class="material-icons">person</span>
          <span>Employee Login</span>
        </button>
        <button class="loader-test-btn" onclick="testLoader('failedLogin')">
          <span class="material-icons">error</span>
          <span>Failed Login</span>
        </button>
        <button class="loader-test-btn" onclick="testLoader('formSubmission')">
          <span class="material-icons">send</span>
          <span>Form Submit</span>
        </button>
        <button class="loader-test-btn" onclick="testLoader('passwordReset')">
          <span class="material-icons">lock_reset</span>
          <span>Password Reset</span>
        </button>
        <button class="loader-test-btn" onclick="testLoader('registration')">
          <span class="material-icons">person_add</span>
          <span>Registration</span>
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Profile Modal -->
<div class="profile-modal" id="profileModal">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="modal-title" id="modalTitle">Profile Information</h2>
      <div class="header-actions">
        <button class="mode-toggle" onclick="toggleProfileMode()" id="modeToggle">
          <span class="material-icons">visibility</span>
          View Profile
        </button>
        <button class="close-btn" onclick="closeProfileModal()">
          <span class="material-icons">close</span>
        </button>
      </div>
    </div>
    <div class="modal-body">
      <!-- View Mode -->
      <div class="view-mode" id="viewMode">
        <div class="profile-header">
          <div class="profile-avatar" id="viewProfileAvatar">
            <span class="material-icons">person</span>
          </div>
          <div class="profile-info">
            <h3 id="viewFullName">John Doe</h3>
            <p id="viewDesignation">Software Developer</p>
            <p id="viewOrganization">TechCorp Solutions • Since 2020</p>
            <p id="viewContactInfo">
              <span id="viewEmail">email@company.com</span> • 
              <span id="viewPhone">+1 (555) 123-4567</span>
            </p>
          </div>
        </div>
        <div class="info-grid">
          <div class="info-card">
            <div class="info-card-title">
              <span class="material-icons">badge</span>
              Employment Details
            </div>
            <div class="info-card-content">
              <div><strong>Employee ID:</strong> <span id="viewEmployeeId">Not specified</span></div>
              <div><strong>Department:</strong> <span id="viewDepartment">Not specified</span></div>
              <div><strong>Salary:</strong> <span id="viewSalary">Not specified</span></div>
              <div><strong>Joining Date:</strong> <span id="viewJoiningDate">Not specified</span></div>
            </div>
          </div>
          <div class="info-card">
            <div class="info-card-title">
              <span class="material-icons">location_on</span>
              Address
            </div>
            <div class="info-card-content">
              <div id="viewAddress">No address provided</div>
            </div>
          </div>
          <div class="info-card">
            <div class="info-card-title">
              <span class="material-icons">schedule</span>
              Timezones & Current Time
            </div>
            <div class="info-card-content">
              <div id="viewTimezoneInfo">
                <strong>Residence:</strong> <span id="viewResidenceTimezone">Not specified</span><br>
                <strong>Work:</strong> <span id="viewWorkTimezone">Not specified</span>
                <div id="timezoneDisplays"></div>
              </div>
            </div>
          </div>
          <div class="info-card">
            <div class="info-card-title">
              <span class="material-icons">code</span>
              Skills
            </div>
            <div class="info-card-content">
              <div class="tag-container" id="viewSkillsContainer">
                <!-- Skills will be rendered here -->
              </div>
            </div>
          </div>
          <div class="info-card">
            <div class="info-card-title">
              <span class="material-icons">school</span>
              Education
            </div>
            <div class="info-card-content" id="viewEducation">
              No education details provided
            </div>
          </div>
          <div class="info-card">
            <div class="info-card-title">
              <span class="material-icons">verified</span>
              Certifications
            </div>
            <div class="info-card-content">
              <div class="tag-container" id="viewCertificationsContainer">
                <!-- Certifications will be rendered here -->
              </div>
            </div>
          </div>
          <div class="info-card">
            <div class="info-card-title">
              <span class="material-icons">emoji_events</span>
              Achievements
            </div>
            <div class="info-card-content">
              <div class="tag-container" id="viewAchievementsContainer">
                <!-- Achievements will be rendered here -->
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Edit Mode -->
      <div class="edit-mode" id="editMode">
        <!-- Profile Photo Section -->
        <div class="photo-section">
          <div class="profile-photo" id="profilePhoto">
            <span class="material-icons">person</span>
          </div>
          <button class="upload-btn" onclick="document.getElementById('photoInput').click()">
            <span class="material-icons">camera_alt</span>
            Upload Photo
          </button>
          <input type="file" id="photoInput" class="file-input" accept="image/*" onchange="handleProfilePhotoUpload(event)">
        </div>
        <form id="profileForm">
          <!-- Basic Information -->
          <div class="form-section">
            <div class="section-title">
              <span class="material-icons">person</span>
              Basic Information
            </div>
            <div class="form-grid">
              <div class="form-group">
                <label for="fullName">Full Name</label>
                <input type="text" id="fullName" name="fullName" placeholder="Enter your full name">
              </div>
              <div class="form-group">
                <label for="email">Email Address</label>
                <input type="email" id="email" name="email" placeholder="your.email@company.com">
              </div>
              <div class="form-group">
                <label for="phone">Phone Number</label>
                <input type="tel" id="phone" name="phone" placeholder="+1 (555) 123-4567">
              </div>
              <div class="form-group">
                <label for="employeeId">Employee ID</label>
                <input type="text" id="employeeId" name="employeeId" placeholder="EMP001">
              </div>
              <div class="form-group">
                <label for="designation">Designation</label>
                <input type="text" id="designation" name="designation" placeholder="Your job title">
              </div>
              <div class="form-group">
                <label for="department">Department</label>
                <input type="text" id="department" name="department" placeholder="Engineering, HR, Sales, etc.">
              </div>
            </div>
          </div>

          <!-- Employment Information -->
          <div class="form-section">
            <div class="section-title">
              <span class="material-icons">work</span>
              Employment Information
            </div>
            <div class="form-grid">
              <div class="form-group">
                <label for="orgName">Organization</label>
                <input type="text" id="orgName" name="orgName" placeholder="Company name">
              </div>
              <div class="form-group">
                <label for="salary">Salary</label>
                <input type="text" id="salary" name="salary" placeholder="$75,000 or ₹600,000">
              </div>
              <div class="form-group">
                <label for="joiningDate">Joining Date</label>
                <input type="date" id="joiningDate" name="joiningDate">
              </div>
              <div class="form-group">
                <label for="workingSince">Working Since</label>
                <input type="date" id="workingSince" name="workingSince">
              </div>
              <div class="form-group full-width">
                <label for="address">Address</label>
                <textarea id="address" name="address" placeholder="Full address including city, state, country" rows="3"></textarea>
              </div>
            </div>
          </div>
          <!-- Location & Time -->
          <div class="form-section">
            <div class="section-title">
              <span class="material-icons">schedule</span>
              Location & Timezone
            </div>
            <div class="form-grid">
              <div class="form-group">
                <label for="residenceTimezone">Residence Timezone</label>
                <div class="timezone-selector">
                  <input type="text" id="residenceTimezone" class="timezone-input" placeholder="Select or search timezone..." readonly onclick="toggleTimezoneDropdown('residence')">
                  <div class="timezone-dropdown" id="residenceDropdown">
                    <input type="text" class="timezone-search" placeholder="Search timezones..." onkeyup="filterTimezones('residence')">
                    <div class="timezone-options" id="residenceOptions"></div>
                  </div>
                </div>
                <button type="button" class="detect-timezone-btn" onclick="detectTimezone('residence')">
                  <span class="material-icons" style="font-size: 1rem;">my_location</span>
                  Auto-detect
                </button>
                <div class="current-time" id="residenceCurrentTime" style="display: none;"></div>
              </div>
              <div class="form-group">
                <label for="workTimezone">Work Timezone</label>
                <div class="timezone-selector">
                  <input type="text" id="workTimezone" class="timezone-input" placeholder="Select or search timezone..." readonly onclick="toggleTimezoneDropdown('work')">
                  <div class="timezone-dropdown" id="workDropdown">
                    <input type="text" class="timezone-search" placeholder="Search timezones..." onkeyup="filterTimezones('work')">
                    <div class="timezone-options" id="workOptions"></div>
                  </div>
                </div>
                <button type="button" class="detect-timezone-btn" onclick="detectTimezone('work')">
                  <span class="material-icons" style="font-size: 1rem;">my_location</span>
                  Auto-detect
                </button>
                <div class="current-time" id="workCurrentTime" style="display: none;"></div>
              </div>
            </div>
          </div>

          <!-- Skills with Categories -->
          <div class="form-section">
            <div class="section-title">
              <span class="material-icons">code</span>
              Skills
            </div>
            <div class="skills-categories">
              <div class="skill-category">
                <div class="category-title">Technical Skills</div>
                <input type="text" class="category-input" id="technicalSkillInput" placeholder="Add technical skill" onkeypress="addSkill(event, 'technical')">
                <div class="tag-container" id="technicalSkillsContainer"></div>
              </div>
              <div class="skill-category">
                <div class="category-title">Soft Skills</div>
                <input type="text" class="category-input" id="softSkillInput" placeholder="Add soft skill" onkeypress="addSkill(event, 'soft')">
                <div class="tag-container" id="softSkillsContainer"></div>
              </div>
              <div class="skill-category">
                <div class="category-title">Languages</div>
                <input type="text" class="category-input" id="languageInput" placeholder="Add language" onkeypress="addSkill(event, 'language')">
                <div class="tag-container" id="languagesContainer"></div>
              </div>
            </div>
          </div>
          <!-- Education -->
          <div class="form-section">
            <div class="section-title">
              <span class="material-icons">school</span>
              Education
            </div>
            <div class="form-grid">
              <div class="form-group full-width">
                <label for="degrees">Degrees & Education</label>
                <textarea id="degrees" name="degrees" placeholder="List your degrees, institutions, and years (one per line)&#10;Example: MBA, Harvard Business School (2018)&#10;Bachelor's in Computer Science, MIT (2015)"></textarea>
              </div>
            </div>
          </div>
          <!-- Certifications -->
          <div class="form-section">
            <div class="section-title">
              <span class="material-icons">verified</span>
              Certifications
            </div>
            <div class="tag-container" id="certificationsContainer">
              <!-- Certifications will be added here dynamically -->
            </div>
            <input type="text" class="add-tag-input" id="certificationInput" placeholder="Add a certification and press Enter" onkeypress="addCertification(event)">
          </div>
          <!-- Achievements -->
          <div class="form-section">
            <div class="section-title">
              <span class="material-icons">emoji_events</span>
              Achievements & Awards
            </div>
            <div class="tag-container" id="achievementsContainer">
              <!-- Achievements will be added here dynamically -->
            </div>
            <input type="text" class="add-tag-input" id="achievementInput" placeholder="Add an achievement and press Enter" onkeypress="addAchievement(event)">
          </div>
        </form>
      </div>
    </div>
    <div class="modal-actions" id="modalActions">
      <button class="btn btn-secondary" onclick="closeProfileModal()">Cancel</button>
      <button class="btn btn-primary" onclick="saveProfile()">Save Profile</button>
    </div>
    <div class="modal-actions" id="viewModeActions" style="display: none;">
      <button class="btn btn-secondary" onclick="handleLogout()">Logout</button>
      <button class="btn btn-secondary" onclick="closeProfileModal()">Close</button>
    </div>
  </div>
</div>

<!-- Main Screen Loading Overlay -->
<div class="main-loading-overlay" id="mainLoadingOverlay">
  <div class="main-loading-content">
    <div class="chaotic-orbit" id="mainChaticOrbit"></div>
    <div class="main-loading-message" id="mainLoadingMessage">
      Loading...
    </div>
    <div class="main-loading-submessage" id="mainLoadingSubmessage">
      Please wait
    </div>
    <div class="main-loading-progress">
      <div class="main-loading-progress-bar" id="mainLoadingProgressBar"></div>
    </div>
  </div>
</div>

<!-- Login Form Modal -->
<div class="login-backdrop" id="loginBackdrop">
  <div class="login-card">
    <button class="login-close-btn" type="button" aria-label="Close" id="loginCloseBtn">
      <span class="material-icons">close</span>
    </button>
    <div class="brand-logo">
      <h1>Orbisyn</h1>
    </div>
    <div class="login-toggle">
      <button class="toggle-btn active" data-type="employer">Employer</button>
      <button class="toggle-btn" data-type="employee">Employee</button>
    </div>
    <h2 class="login-title" id="loginTitle">Please sign in</h2>
    <div class="security-warning">
      <div class="warning-title">
        <span class="material-icons">lock</span>
        Security Guidelines
      </div>
      <ul id="securityGuidelines">
        <li>Use your official company email address</li>
        <li>Ensure you're on a secure network connection</li>
        <li>Never share your login credentials</li>
        <li>Log out completely when finished</li>
      </ul>
    </div>
    <div class="error-message" id="errorMessage">
      <span class="material-icons">error</span>
      <span>Invalid Username or Password. Too many failed attempts will lock your account.</span>
    </div>
    <div class="attempt-warning" id="attemptWarning">
      <span class="material-icons">warning</span>
      <span>Account will be locked after 3 more failed attempts. Contact your system administrator if you need assistance.</span>
    </div>
    <div class="success-message" id="successMessage">
      <span class="material-icons">check_circle</span>
      <span></span>
    </div>
    <form id="loginForm">
      <div class="login-form-fields">
        <div class="login-input-group">
          <label for="loginField" class="login-label" id="loginLabel">Email Address</label>
          <input type="email" id="loginField" name="loginField" class="login-input" required />
        </div>
        <div class="login-input-group">
          <label for="loginPassword" class="login-label">Password</label>
          <input type="password" id="loginPassword" name="password" class="login-input" required />
          <button type="button" class="password-toggle" id="passwordToggle">
            <span class="material-icons">visibility</span>
          </button>
        </div>
      </div>
      <div class="password-guidelines" id="passwordGuidelines">
        <div class="guideline-title">
          <span class="material-icons">info</span>
          Password Requirements:
        </div>
        <div id="passwordRequirements">
          Minimum 8 characters, including uppercase, lowercase, number and special character.
        </div>
      </div>
      <button type="submit" class="login-submit-btn" id="loginSubmitBtn">
        <span class="material-icons">login</span>
        <span id="loginBtnText">Sign in to OrbiWave</span>
      </button>
    </form>
    <div class="form-links">
      <div class="forgot-links" id="forgotLinks">
        <a href="#" class="login-link" id="forgotUsername">
          <span class="material-icons">person</span>
          Forgot username
        </a>
        <a href="#" class="login-link" id="forgotPassword">
          <span class="material-icons">key</span>
          Forgot password
        </a>
      </div>
    </div>
    <div class="register-section">
      <div class="register-text" id="registerText">Not Registered Yet?</div>
      <div class="register-description" id="registerDescription">
        If the business you work for is a client of Orbisyn, please click the link below to register.
      </div>
      <a href="#" class="login-link" id="registerLink">
        <span class="material-icons">person_add</span>
        <span>Register Now</span>
      </a>
    </div>
    <div class="terms-notice">
      <span class="material-icons">gavel</span>
      By signing in, you agree to our Terms of Service and Privacy Policy. This system is for authorized users only. All activity is monitored and logged.
    </div>
  </div>
</div>

<script>
  const menuToggle = document.querySelector('.menu-toggle');
  const mainNav = document.getElementById('mainNav');
  const navButtons = mainNav.querySelectorAll('.nav-link[aria-haspopup="true"]');

  menuToggle.addEventListener('click', () => {
    const isShown = mainNav.classList.toggle('show');
    menuToggle.setAttribute('aria-expanded', isShown);
  });

  function closeAllDropdowns(except = null) {
    navButtons.forEach(btn => {
      if (btn !== except) {
        btn.setAttribute('aria-expanded', 'false');
        const dropdown = document.getElementById(btn.getAttribute('aria-controls'));
        if (dropdown) dropdown.classList.remove('open');
      }
    });
  }

  navButtons.forEach(button => {
    button.addEventListener('click', (e) => {
      e.stopPropagation();
      const currentDropdown = document.getElementById(button.getAttribute('aria-controls'));
      const expanded = button.getAttribute('aria-expanded') === 'true';
      closeAllDropdowns(button);
      if (!expanded) {
        button.setAttribute('aria-expanded', 'true');
        if (currentDropdown) currentDropdown.classList.add('open');
      } else {
        button.setAttribute('aria-expanded', 'false');
        if (currentDropdown) currentDropdown.classList.remove('open');
      }
    });
  });

  // Nested support submenu toggle inside Contact dropdown
  const supportToggle = document.querySelector('#dropdown-contact .nav-link[aria-haspopup="true"]');
  if (supportToggle) {
    supportToggle.addEventListener('click', e => {
      e.stopPropagation();
      const supportDropdown = document.getElementById(supportToggle.getAttribute('aria-controls'));
      const expanded = supportToggle.getAttribute('aria-expanded') === 'true';
      if (!expanded) {
        supportToggle.setAttribute('aria-expanded', 'true');
        if (supportDropdown) supportDropdown.classList.add('open');
      } else {
        supportToggle.setAttribute('aria-expanded', 'false');
        if (supportDropdown) supportDropdown.classList.remove('open');
      }
    });
  }

  document.addEventListener('click', () => {
    closeAllDropdowns();
    mainNav.classList.remove('show');
    menuToggle.setAttribute('aria-expanded', 'false');
    if (supportToggle) {
      supportToggle.setAttribute('aria-expanded', 'false');
      const supportDropdown = document.getElementById(supportToggle.getAttribute('aria-controls'));
      if (supportDropdown) supportDropdown.classList.remove('open');
    }
  });

  document.addEventListener('keydown', e => {
    if (e.key === "Escape") {
      closeAllDropdowns();
      mainNav.classList.remove('show');
      menuToggle.setAttribute('aria-expanded', 'false');
      if (supportToggle) {
        supportToggle.setAttribute('aria-expanded', 'false');
        const supportDropdown = document.getElementById(supportToggle.getAttribute('aria-controls'));
        if (supportDropdown) supportDropdown.classList.remove('open');
      }
      // Close form modal on Escape
      const formBackdrop = document.getElementById('formBackdrop');
      if (formBackdrop && formBackdrop.classList.contains('show')) {
        formBackdrop.classList.remove('show');
      }
    }
  });

  // Multi-Step Form Functionality
  const getStartedBtn = document.querySelector('.get-started-btn');
  const formBackdrop = document.getElementById('formBackdrop');
  const formCloseBtn = document.getElementById('formCloseBtn');
  const formCompanyNameInput = document.getElementById('formCompanyName');
  const formNumEmployeesInput = document.getElementById('formNumEmployees');
  const formNextBtn = document.getElementById('formToStep2Btn');
  const formStep1 = document.getElementById('formStep1');
  const formStep2 = document.getElementById('formStep2');
  const formProgressBarFill = document.getElementById('formProgressBarFill');
  const formProgressSteps = document.querySelectorAll('.progress-step');

  // Open form modal when "Let's Get Started" button is clicked (touch-friendly)
  const openFormModal = (e) => {
    if (e) {
      e.preventDefault();
      e.stopPropagation();
    }
    formBackdrop.classList.add('show');
    // Reset form to step 1
    formStep1.classList.add('active');
    formStep2.classList.remove('active');
    formProgressSteps[0].classList.add('active');
    formProgressSteps[1].classList.remove('active');
    formProgressBarFill.style.width = '0%';
    formCompanyNameInput.value = '';
    formNumEmployeesInput.value = '';
    formNextBtn.disabled = true;
    // Focus on first input
    setTimeout(() => formCompanyNameInput.focus(), 100);
  };

  ['click', 'touchend', 'pointerup'].forEach(evt => {
    getStartedBtn.addEventListener(evt, openFormModal, { passive: false });
  });

  // Close form modal
  function closeFormModal() {
    formBackdrop.classList.remove('show');
  }

  formCloseBtn.addEventListener('click', closeFormModal);

  // Close modal when clicking on backdrop (support touch/pointer)
  const backdropClickHandler = (e) => {
    const target = e.target || e.srcElement;
    if (target === formBackdrop) {
      e.preventDefault();
      e.stopPropagation();
      closeFormModal();
    }
  };
  ['click', 'touchend', 'pointerup'].forEach(evt => {
    formBackdrop.addEventListener(evt, backdropClickHandler, { passive: false });
  });

  // Form progress and validation
  function updateFormProgress() {
    let progress = 0;
    const nameLen = Math.min(formCompanyNameInput.value.trim().length, 50);
    progress += (nameLen / 50) * 50;
    const empVal = formNumEmployeesInput.value.trim();
    if (empVal.length > 0 && !isNaN(empVal) && Number(empVal) > 0) {
      progress += 50;
    }
    formProgressBarFill.style.width = `${progress}%`;
    
    // Update step indicators
    formProgressSteps.forEach((step, index) => {
      if (index === 0) {
        step.classList.toggle('active', progress < 100);
      } else if (index === 1) {
        step.classList.toggle('active', progress === 100);
      }
    });
    
    formNextBtn.disabled = !(formCompanyNameInput.value.trim().length > 0 && empVal.length > 0 && !isNaN(empVal) && Number(empVal) > 0);
  }

  formCompanyNameInput.addEventListener('input', updateFormProgress);
  formNumEmployeesInput.addEventListener('input', updateFormProgress);

  // Move to step 2 and record form submission with enhanced loading animation (touch-friendly)
  const handleFormNext = (e) => {
    if (e) {
      e.preventDefault();
      e.stopPropagation();
    }
    if (formNextBtn.disabled) return;
    
    // Show processing state with mini loader
    formNextBtn.disabled = true;
    formNextBtn.innerHTML = '<div class="chaotic-orbit" style="--uib-size: 20px; --uib-color: #fff;"></div>';
    
    // Prepare form data
    const formData = {
      companyName: formCompanyNameInput.value.trim(),
      numEmployees: parseInt(formNumEmployeesInput.value.trim()),
      submissionSource: 'get-started-form',
      step: 'company-info'
    };
    
    // Use enhanced loader for form submission
    showConditionalLoader('employer', 'form_submit', {
      callback: () => {
        // Record form submission in database
        const submissionId = DatabaseManager.recordSubmission('getStarted', formData);
        DatabaseManager.log('formSubmissions', 'Get Started form submitted', {
          submissionId: submissionId,
          companyName: formData.companyName,
          numEmployees: formData.numEmployees
        });
        
        console.log('📝 Get Started form submitted:', formData);
        console.log('🆔 Submission ID:', submissionId);
        
        // Move to step 2
        formStep1.classList.remove('active');
        formStep2.classList.add('active');
        formProgressBarFill.style.width = '100%';
        formProgressSteps[0].classList.remove('active');
        formProgressSteps[1].classList.add('active');
        
        // Reset button immediately
        formNextBtn.disabled = false;
        formNextBtn.innerHTML = 'Next';
        
        // Auto-close after 3 seconds
        setTimeout(() => {
          closeFormModal();
          alert(`✅ Thank you ${formData.companyName}! Your information has been recorded.\n\n📊 Company: ${formData.companyName}\n👥 Employees: ${formData.numEmployees}\n🆔 Reference: ${submissionId.slice(-8)}\n\nA representative will contact you shortly!`);
        }, 3000);
      }
    });
  };
  ['click', 'touchend', 'pointerup'].forEach(evt => {
    formNextBtn.addEventListener(evt, handleFormNext, { passive: false });
  });

  // Initialize form progress
  updateFormProgress();

  // Login Form Functionality
  const loginBtn = document.querySelector('.login-btn');
  const loginBackdrop = document.getElementById('loginBackdrop');
  const loginCloseBtn = document.getElementById('loginCloseBtn');
  const loginToggleBtns = document.querySelectorAll('.toggle-btn');
  const loginTitle = document.getElementById('loginTitle');
  const loginLabel = document.getElementById('loginLabel');
  const loginField = document.getElementById('loginField');
  const loginSubmitBtn = document.getElementById('loginSubmitBtn');
  const loginBtnText = document.getElementById('loginBtnText');
  const forgotLinks = document.getElementById('forgotLinks');
  const forgotUsername = document.getElementById('forgotUsername');
  const forgotPassword = document.getElementById('forgotPassword');
  const registerText = document.getElementById('registerText');
  const registerDescription = document.getElementById('registerDescription');
  const registerLink = document.getElementById('registerLink');
  const errorMessage = document.getElementById('errorMessage');
  const attemptWarning = document.getElementById('attemptWarning');
  const successMessage = document.getElementById('successMessage');
  const passwordToggle = document.getElementById('passwordToggle');
  const passwordField = document.getElementById('loginPassword');
  const loginForm = document.getElementById('loginForm');
  const securityGuidelines = document.getElementById('securityGuidelines');
  const passwordGuidelines = document.getElementById('passwordGuidelines');
  const passwordRequirements = document.getElementById('passwordRequirements');
  const testCredentials = document.getElementById('testCredentials');

  let currentLoginType = 'employer';
  let attemptCount = 0;

  // Comprehensive Database System for Form Recording
  const orbisyn_database = {
    // User Authentication Database
    users: {
      employer: [
        { id: 'emp_001', email: 'john.smith@techcorp.com', password: 'TechCorp@2024', name: 'John Smith', role: 'CEO', company: 'TechCorp Solutions', status: 'active', lastLogin: null },
        { id: 'emp_002', email: 'sarah.johnson@innovate.biz', password: 'Innovation!123', name: 'Sarah Johnson', role: 'HR Manager', company: 'Innovate Business Solutions', status: 'active', lastLogin: null },
        { id: 'emp_003', email: 'michael.chen@globaltech.net', password: 'Finance#2024', name: 'Michael Chen', role: 'Finance Director', company: 'GlobalTech Industries', status: 'active', lastLogin: null }
      ],
      employee: [
        { id: 'emp_101', username: 'dev_alex_2024', password: 'DevCode@123', name: 'Alex Rodriguez', role: 'Senior Developer', department: 'Engineering', employeeId: 'ENG001', status: 'active', lastLogin: null },
        { id: 'emp_102', username: 'marketing_lisa', password: 'Market!ng456', name: 'Lisa Williams', role: 'Marketing Specialist', department: 'Marketing', employeeId: 'MKT001', status: 'active', lastLogin: null },
        { id: 'emp_103', username: 'sales_robert', password: 'Sales&Rep789', name: 'Robert Davis', role: 'Sales Representative', department: 'Sales', employeeId: 'SAL001', status: 'active', lastLogin: null },
        { id: 'emp_104', username: 'hr_assistant_jane', password: 'HumanRes@2024', name: 'Jane Miller', role: 'HR Assistant', department: 'Human Resources', employeeId: 'HR001', status: 'active', lastLogin: null }
      ]
    },
    
    // Form Submissions Database
    submissions: {
      getStarted: [],
      contactUs: [],
      newsletter: [],
      loginAttempts: [],
      registrations: [],
      passwordReset: []
    },
    
    // System Logs
    logs: {
      loginAttempts: [],
      formSubmissions: [],
      errors: [],
      security: []
    }
  };

  // Database Helper Functions
  const DatabaseManager = {
    // Save data to localStorage
    save: function() {
      try {
        localStorage.setItem('orbisyn_database', JSON.stringify(orbisyn_database));
        console.log('✅ Database saved successfully');
      } catch (error) {
        console.error('❌ Failed to save database:', error);
      }
    },
    
    // Load data from localStorage
    load: function() {
      try {
        const saved = localStorage.getItem('orbisyn_database');
        if (saved) {
          const loadedData = JSON.parse(saved);
          // Merge with default structure to ensure all properties exist
          Object.assign(orbisyn_database, loadedData);
          console.log('✅ Database loaded successfully');
        }
      } catch (error) {
        console.error('❌ Failed to load database:', error);
      }
    },
    
    // Record form submission
    recordSubmission: function(formType, data) {
      const submission = {
        id: 'sub_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),
        timestamp: new Date().toISOString(),
        formType: formType,
        data: data,
        userAgent: navigator.userAgent,
        url: window.location.href
      };
      
      orbisyn_database.submissions[formType].push(submission);
      this.log('formSubmissions', `Form submitted: ${formType}`, submission);
      this.save();
      return submission.id;
    },
    
    // Record login attempt
    recordLoginAttempt: function(loginType, identifier, success, userInfo = null) {
      const attempt = {
        id: 'login_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),
        timestamp: new Date().toISOString(),
        loginType: loginType,
        identifier: identifier,
        success: success,
        userInfo: userInfo,
        ip: 'localhost', // In real app, get actual IP
        userAgent: navigator.userAgent
      };
      
      orbisyn_database.logs.loginAttempts.push(attempt);
      if (success && userInfo) {
        // Update user's last login
        const users = orbisyn_database.users[loginType];
        const user = users.find(u => 
          loginType === 'employer' ? u.email === identifier : u.username === identifier
        );
        if (user) {
          user.lastLogin = new Date().toISOString();
        }
      }
      this.save();
      return attempt.id;
    },
    
    // Log system events
    log: function(category, message, data = null) {
      const logEntry = {
        id: 'log_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),
        timestamp: new Date().toISOString(),
        category: category,
        message: message,
        data: data
      };
      
      orbisyn_database.logs[category].push(logEntry);
      console.log(`📝 [${category.toUpperCase()}] ${message}`, data);
    },
    
    // Get all submissions by type
    getSubmissions: function(formType) {
      return orbisyn_database.submissions[formType] || [];
    },
    
    // Get user statistics
    getStats: function() {
      return {
        totalUsers: orbisyn_database.users.employer.length + orbisyn_database.users.employee.length,
        totalSubmissions: Object.values(orbisyn_database.submissions).reduce((sum, arr) => sum + arr.length, 0),
        totalLoginAttempts: orbisyn_database.logs.loginAttempts.length,
        successfulLogins: orbisyn_database.logs.loginAttempts.filter(a => a.success).length
      };
    },
    
    // Export all data
    exportData: function() {
      const dataStr = JSON.stringify(orbisyn_database, null, 2);
      const dataBlob = new Blob([dataStr], {type: 'application/json'});
      const url = URL.createObjectURL(dataBlob);
      const link = document.createElement('a');
      link.href = url;
      link.download = `orbisyn_database_${new Date().toISOString().split('T')[0]}.json`;
      link.click();
      URL.revokeObjectURL(url);
    }
  };

  // Initialize database
  DatabaseManager.load();

  // ========================================
  // ENHANCED LOADER CONFIGURATION PARAMETERS
  // ========================================
  const loaderConfig = {
    // Condition parameters - when to show loader
    conditions: {
      MIN_PROCESS_TIME: 1000,     // Minimum time to show loader (ms)
      MAX_PROCESS_TIME: 5000,     // Maximum time for process (ms)
      SHOW_ON_SUBMIT: true,       // Show on form submissions
      SHOW_ON_AJAX: true,         // Show on AJAX requests
      SHOW_ON_UPLOAD: true,       // Show on file uploads
      SHOW_ON_LOGIN: true,        // Show on login attempts
      AUTO_HIDE: true             // Auto-hide when complete
    },
    // Message sequences for different processes
    messages: {
      employerLogin: [
        { message: "Authenticating employer...", submessage: "Verifying company credentials", duration: 1000, color: '#007bff' },
        { message: "Connecting to OrbiWave...", submessage: "Loading employer dashboard", duration: 1500, color: '#28a745' },
        { message: "Setting up workspace...", submessage: "Preparing your tools", duration: 1000, color: '#28a745' },
        { message: "Welcome to OrbiWave!", submessage: "Redirecting to dashboard", duration: 800, color: '#28a745' }
      ],
      employeeLogin: [
        { message: "Authenticating employee...", submessage: "Verifying user credentials", duration: 1000, color: '#007bff' },
        { message: "Connecting to OrbiFlex...", submessage: "Loading employee portal", duration: 1500, color: '#17a2b8' },
        { message: "Loading your profile...", submessage: "Getting your information", duration: 1000, color: '#17a2b8' },
        { message: "Welcome to OrbiFlex!", submessage: "Redirecting to portal", duration: 800, color: '#17a2b8' }
      ],
      failedLogin: [
        { message: "Authentication failed", submessage: "Invalid credentials provided", duration: 1200, color: '#dc3545' },
        { message: "Please try again", submessage: "Check your login information", duration: 800, color: '#dc3545' }
      ],
      accountLocked: [
        { message: "Security check...", submessage: "Verifying account status", duration: 1000, color: '#ffc107' },
        { message: "Account locked", submessage: "Too many failed attempts", duration: 1500, color: '#dc3545' },
        { message: "Contact administrator", submessage: "Account requires assistance", duration: 1000, color: '#dc3545' }
      ],
      formSubmission: [
        { message: "Processing information...", submessage: "Validating your data", duration: 1000, color: '#007bff' },
        { message: "Saving to database...", submessage: "Recording your submission", duration: 1500, color: '#28a745' },
        { message: "Almost complete...", submessage: "Finalizing process", duration: 800, color: '#28a745' },
        { message: "Success!", submessage: "Information saved successfully", duration: 700, color: '#28a745' }
      ],
      passwordReset: [
        { message: "Processing request...", submessage: "Validating your information", duration: 1000, color: '#007bff' },
        { message: "Generating reset link...", submessage: "Creating secure token", duration: 1500, color: '#17a2b8' },
        { message: "Sending email...", submessage: "Delivering reset instructions", duration: 1200, color: '#28a745' },
        { message: "Email sent!", submessage: "Check your inbox", duration: 800, color: '#28a745' }
      ],
      registration: [
        { message: "Processing registration...", submessage: "Validating company information", duration: 1200, color: '#007bff' },
        { message: "Creating account...", submessage: "Setting up your profile", duration: 1500, color: '#17a2b8' },
        { message: "Sending confirmation...", submessage: "Preparing welcome email", duration: 1000, color: '#28a745' },
        { message: "Registration complete!", submessage: "Welcome to Orbisyn", duration: 800, color: '#28a745' }
      ]
    }
  };

  // ========================================
  // ENHANCED LOADER CONTROL FUNCTIONS
  // ========================================
  let currentLoaderProcess = null;
  let loaderMessageTimeout = null;

  // Main function to show loader with enhanced conditions
  function showEnhancedLoader(processType, customMessages = null, callback = null) {
    // Check conditions
    if (!loaderConfig.conditions.SHOW_ON_LOGIN && /Login/i.test(processType)) return;
    if (!loaderConfig.conditions.SHOW_ON_SUBMIT && processType === 'formSubmission') return;
    
    // Clear any existing process
    if (currentLoaderProcess) {
      clearTimeout(currentLoaderProcess);
      clearTimeout(loaderMessageTimeout);
    }
    
    // Get messages for this process type
    const messages = customMessages || loaderConfig.messages[processType] || loaderConfig.messages.formSubmission;
    
    // Show main screen loading state
    showMainLoader(processType);
    
    // Run enhanced message sequence
    runEnhancedMessageSequence(messages, callback);
  }

  // Run through enhanced message sequence with colors
  function runEnhancedMessageSequence(messages, callback) {
    let messageIndex = 0;
    
    function showNextEnhancedMessage() {
      if (messageIndex < messages.length) {
        const { message, submessage, duration, color } = messages[messageIndex];
        
        // Update main loader messages and color
        mainLoadingMessage.textContent = message;
        mainLoadingSubmessage.textContent = submessage;
        document.documentElement.style.setProperty('--uib-color', color);
        
        // Update progress bar
        mainLoadingProgressBar.style.width = `${((messageIndex + 1) / messages.length) * 100}%`;
        
        messageIndex++;
        
        // Schedule next message
        loaderMessageTimeout = setTimeout(showNextEnhancedMessage, duration);
      } else {
        // All messages complete
        if (loaderConfig.conditions.AUTO_HIDE) {
          setTimeout(() => {
            hideMainLoader();
            if (callback) callback();
          }, 500);
        }
      }
    }
    
    // Start message sequence
    showNextEnhancedMessage();
  }

  // Enhanced status update function
  function updateEnhancedStatus(message, type = 'info') {
    const colors = {
      success: { bg: '#e8f5e8', border: '#c3e6cb', text: '#155724' },
      error: { bg: '#f8d7da', border: '#f5c6cb', text: '#721c24' },
      warning: { bg: '#fff3cd', border: '#ffeaa7', text: '#856404' },
      info: { bg: '#d1ecf1', border: '#bee5eb', text: '#0c5460' }
    };
    
    const color = colors[type] || colors.info;
    console.log(`📊 Status Update [${type.toUpperCase()}]: ${message}`);
  }

  // Conditional loader based on user type and action
  function showConditionalLoader(userType, action, additionalData = {}) {
    let processType = '';
    
    if (action === 'login') {
      processType = userType === 'employer' ? 'employerLogin' : 'employeeLogin';
    } else if (action === 'failed_login') {
      processType = 'failedLogin';
    } else if (action === 'account_locked') {
      processType = 'accountLocked';
    } else if (action === 'form_submit') {
      processType = 'formSubmission';
    } else if (action === 'password_reset') {
      processType = 'passwordReset';
    } else if (action === 'registration') {
      processType = 'registration';
    }
    
    showEnhancedLoader(processType, null, additionalData.callback);
  }

  // Test function for demo buttons
  function testLoader(processType) {
    console.log(`🎨 Testing loader: ${processType}`);
    showEnhancedLoader(processType, null, () => {
      console.log(`✅ ${processType} loader test completed`);
      // Show a brief success message
      setTimeout(() => {
        alert(`✅ ${processType} animation completed!\n\nCheck the console for detailed logs.`);
      }, 100);
    });
  }

  // Enhanced main screen loader with better UX
  function showMainScreenLoader(title, subtitle, color = '#007bff') {
    mainLoadingMessage.textContent = title;
    mainLoadingSubmessage.textContent = subtitle;
    document.documentElement.style.setProperty('--uib-color', color);
    mainLoadingOverlay.classList.add('show');
    
    // Animate progress bar
    mainLoadingProgressBar.style.width = '0%';
    setTimeout(() => {
      mainLoadingProgressBar.style.width = '100%';
    }, 200);
  }

  function hideMainScreenLoader() {
    mainLoadingOverlay.classList.remove('show');
    mainLoadingProgressBar.style.width = '0%';
  }

  // Tools Panel Functions
  function toggleToolsPanel() {
    const toolsPanel = document.getElementById('toolsPanel');
    toolsPanel.classList.toggle('show');
    
    // Log panel state
    const isOpen = toolsPanel.classList.contains('show');
    console.log(`🔧 Tools panel ${isOpen ? 'opened' : 'closed'}`);
    
    // Update button text based on state
    const toolsBtn = document.getElementById('toolsBtn');
    const icon = toolsBtn.querySelector('.material-icons');
    const text = toolsBtn.childNodes[2]; // Text node after icon and space
    
    if (isOpen) {
      icon.textContent = 'close';
      text.textContent = 'Close';
    } else {
      icon.textContent = 'build';
      text.textContent = 'Tools';
    }
  }

  // Copy to clipboard function
  function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(() => {
      console.log(`📋 Copied to clipboard: ${text}`);
      
      // Show temporary feedback
      const originalText = event.target.textContent;
      event.target.textContent = 'Copied!';
      event.target.style.background = '#28a745';
      event.target.style.color = 'white';
      
      setTimeout(() => {
        event.target.textContent = originalText;
        event.target.style.background = '';
        event.target.style.color = '';
      }, 1000);
      
    }).catch(err => {
      console.error('❌ Failed to copy to clipboard:', err);
      // Fallback for older browsers
      const textArea = document.createElement('textarea');
      textArea.value = text;
      document.body.appendChild(textArea);
      textArea.select();
      document.execCommand('copy');
      document.body.removeChild(textArea);
      
      // Show feedback
      alert(`📋 Copied: ${text}`);
    });
  }

  // Close tools panel when clicking outside
  document.addEventListener('click', (e) => {
    const toolsPanel = document.getElementById('toolsPanel');
    const toolsBtn = document.getElementById('toolsBtn');
    
    if (toolsPanel.classList.contains('show') && 
        !toolsPanel.contains(e.target) && 
        !toolsBtn.contains(e.target)) {
      toggleToolsPanel();
    }
  });

  // Keyboard shortcut to toggle tools panel (Ctrl/Cmd + T)
  document.addEventListener('keydown', (e) => {
    if ((e.ctrlKey || e.metaKey) && e.key === 't') {
      e.preventDefault();
      toggleToolsPanel();
    }
  });

  // Mobile hamburger menu toggles the same nav drawer
  (function initMobileMenu() {
    const menuToggle = document.querySelector('.menu-toggle');
    const mainNav = document.getElementById('mainNav');
    if (!menuToggle || !mainNav) return;

    const toggleNav = (e) => {
      e && (e.preventDefault(), e.stopPropagation());
      const isOpen = mainNav.classList.toggle('show');
      menuToggle.setAttribute('aria-expanded', String(isOpen));
      // Compute fixed top for nav to sit under header
      if (isOpen) {
        const header = document.querySelector('.header');
        const rect = header ? header.getBoundingClientRect() : { bottom: 0 };
        document.documentElement.style.setProperty('--mobile-nav-top', `${rect.bottom}px`);
        document.body.classList.add('nav-open');
      } else {
        document.body.classList.remove('nav-open');
      }
    };

    ['click','touchend','pointerup'].forEach(evt => {
      menuToggle.addEventListener(evt, toggleNav, { passive: false });
    });

    // Mobile top-level: open one menu at a time
    mainNav.addEventListener('click', (e) => {
      const btn = e.target.closest('button.nav-link[aria-controls]');
      if (btn && window.innerWidth <= 1024) {
        e.preventDefault();
        const li = btn.closest('li');
        const alreadyOpen = li.classList.contains('open');
        // Close all
        mainNav.querySelectorAll('li.open').forEach(x => x.classList.remove('open'));
        mainNav.querySelectorAll('button.nav-link[aria-expanded]')
          .forEach(b => b.setAttribute('aria-expanded','false'));
        // Toggle current
        if (!alreadyOpen) {
          li.classList.add('open');
          btn.setAttribute('aria-expanded','true');
        }
      }

      // Nested submenu toggles inside dropdowns (e.g., Contact Support ▾)
      const nestedBtn = e.target.closest('.dropdown button[aria-controls]');
      if (nestedBtn && window.innerWidth <= 1024) {
        e.preventDefault();
        const expanded = nestedBtn.getAttribute('aria-expanded') === 'true';
        nestedBtn.setAttribute('aria-expanded', String(!expanded));
      }
    });

    // Click outside closes whole nav
    document.addEventListener('click', (e) => {
      if (mainNav.classList.contains('show')) {
        const within = mainNav.contains(e.target) || menuToggle.contains(e.target);
        if (!within) {
          mainNav.classList.remove('show');
          menuToggle.setAttribute('aria-expanded','false');
          document.body.classList.remove('nav-open');
          // Also reset open states
          mainNav.querySelectorAll('li.open').forEach(x => x.classList.remove('open'));
          mainNav.querySelectorAll('button.nav-link[aria-expanded]')
            .forEach(b => b.setAttribute('aria-expanded','false'));
        }
      }
    });

    // Close when resizing to desktop
    window.addEventListener('resize', () => {
      if (window.innerWidth > 1024 && mainNav.classList.contains('show')) {
        mainNav.classList.remove('show');
        menuToggle.setAttribute('aria-expanded','false');
        document.body.classList.remove('nav-open');
        mainNav.querySelectorAll('li.open').forEach(x => x.classList.remove('open'));
        mainNav.querySelectorAll('button.nav-link[aria-expanded]')
          .forEach(b => b.setAttribute('aria-expanded','false'));
      }
    });
  })();

  // Login button opens login modal (ensure proper show/hide)
  if (loginBtn && loginBackdrop && loginCloseBtn) {
    const openLoginModal = (e) => {
      e && (e.preventDefault(), e.stopPropagation());
      loginBackdrop.classList.add('show');
      hideAllMessages();
      resetLoginButton();
    };
    const closeLoginModal = (e) => {
      e && (e.preventDefault(), e.stopPropagation());
      loginBackdrop.classList.remove('show');
    };
    ['click','touchend','pointerup'].forEach(evt => {
      loginBtn.addEventListener(evt, openLoginModal, { passive: false });
      loginCloseBtn.addEventListener(evt, closeLoginModal, { passive: false });
    });
    loginBackdrop.addEventListener('click', (e) => {
      if (e.target === loginBackdrop) closeLoginModal(e);
    });
  }

  // Profile Modal Functions
  let profileData = {
    photo: null,
    fullName: '',
    email: '',
    phone: '',
    employeeId: '',
    designation: '',
    department: '',
    orgName: '',
    salary: '',
    joiningDate: '',
    workingSince: '',
    address: '',
    residenceTimezone: '',
    workTimezone: '',
    skills: {
      technical: [],
      soft: [],
      language: []
    },
    degrees: '',
    certifications: [],
    achievements: []
  };
  let currentProfileMode = 'edit';
  let timezoneList = [];
  let timeUpdateInterval = null;

  // Initialize timezone data
  function initializeTimezones() {
    // Get all timezone names from moment.js
    timezoneList = moment.tz.names().map(tz => {
      const now = moment().tz(tz);
      return {
        name: tz,
        displayName: tz.replace(/_/g, ' '),
        offset: now.format('Z'),
        offsetMinutes: now.utcOffset(),
        currentTime: now.format('HH:mm:ss'),
        date: now.format('YYYY-MM-DD'),
        abbreviation: now.format('z')
      };
    });
    // Sort by offset and then by name
    timezoneList.sort((a, b) => {
      if (a.offsetMinutes !== b.offsetMinutes) {
        return a.offsetMinutes - b.offsetMinutes;
      }
      return a.displayName.localeCompare(b.displayName);
    });
  }

  // Profile modal controls
  function openProfileModal() {
    document.getElementById('profileModal').classList.add('show');
    loadProfileData();
    if (hasProfileData()) {
      switchToViewMode();
    } else {
      switchToEditMode();
    }
    startTimeUpdates();
    console.log('👤 Profile modal opened');
  }

  function closeProfileModal() {
    document.getElementById('profileModal').classList.remove('show');
    if (timeUpdateInterval) {
      clearInterval(timeUpdateInterval);
      timeUpdateInterval = null;
    }
    // Close all dropdowns
    document.querySelectorAll('.timezone-dropdown').forEach(dd => dd.classList.remove('show'));
    console.log('👤 Profile modal closed');
  }

  // Mode toggle
  function toggleProfileMode() {
    if (currentProfileMode === 'edit') {
      switchToViewMode();
    } else {
      switchToEditMode();
    }
  }

  function switchToViewMode() {
    currentProfileMode = 'view';
    document.getElementById('viewMode').classList.add('active');
    document.getElementById('editMode').classList.add('hidden');
    document.getElementById('modalTitle').textContent = 'Profile Overview';
    document.getElementById('modeToggle').innerHTML = '<span class="material-icons">edit</span>Edit Profile';
    document.getElementById('modalActions').style.display = 'none';
    document.getElementById('viewModeActions').style.display = 'flex';
    renderViewMode();
  }

  function switchToEditMode() {
    currentProfileMode = 'edit';
    document.getElementById('viewMode').classList.remove('active');
    document.getElementById('editMode').classList.remove('hidden');
    document.getElementById('modalTitle').textContent = 'Edit Profile';
    document.getElementById('modeToggle').innerHTML = '<span class="material-icons">visibility</span>View Profile';
    document.getElementById('modalActions').style.display = 'flex';
    document.getElementById('viewModeActions').style.display = 'none';
  }

  // Check if profile has data
  function hasProfileData() {
    return profileData.fullName || profileData.designation || profileData.orgName || 
           profileData.skills.technical.length > 0 || profileData.skills.soft.length > 0 || 
           profileData.certifications.length > 0 || profileData.achievements.length > 0;
  }

  // Photo upload handling
  function handleProfilePhotoUpload(event) {
    const file = event.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function(e) {
        const photoData = e.target.result;
        profileData.photo = photoData;
        // Persist profile data immediately
        try { localStorage.setItem('profileData', JSON.stringify(profileData)); } catch (e) { console.warn('Could not save profileData to storage', e); }
        // Update profile photo in modal
        const profilePhoto = document.getElementById('profilePhoto');
        profilePhoto.innerHTML = `<img src="${photoData}" alt="Profile Photo">`;
        // Update view mode avatar
        const viewAvatar = document.getElementById('viewProfileAvatar');
        viewAvatar.innerHTML = `<img src="${photoData}" alt="Profile">`;
        // Update header avatar
        const headerAvatar = document.getElementById('headerAvatar');
        if (headerAvatar) headerAvatar.innerHTML = `<img src="${photoData}" alt="Profile" />`;
        console.log('📷 Profile photo uploaded & saved');
      };
      reader.readAsDataURL(file);
    }
  }

  // Enhanced skills management
  function addSkill(event, category) {
    if (event.key === 'Enter') {
      event.preventDefault();
      const input = event.target;
      const skill = input.value.trim();
      if (skill && !profileData.skills[category].includes(skill)) {
        profileData.skills[category].push(skill);
        renderSkills(category);
        input.value = '';
        console.log(`🎯 Added ${category} skill: ${skill}`);
      }
    }
  }

  function removeSkill(skill, category) {
    profileData.skills[category] = profileData.skills[category].filter(s => s !== skill);
    renderSkills(category);
    console.log(`🗑️ Removed ${category} skill: ${skill}`);
  }

  function renderSkills(category) {
    const container = document.getElementById(`${category}SkillsContainer`);
    if (!container) return;
    container.innerHTML = profileData.skills[category].map(skill => `
      <div class="tag">
        ${skill}
        <button class="remove-tag" onclick="removeSkill('${skill}', '${category}')">&times;</button>
      </div>
    `).join('');
  }

  function renderAllSkills() {
    renderSkills('technical');
    renderSkills('soft');
    renderSkills('language');
  }

  // Certifications management
  function addCertification(event) {
    if (event.key === 'Enter') {
      event.preventDefault();
      const input = document.getElementById('certificationInput');
      const cert = input.value.trim();
      if (cert && !profileData.certifications.includes(cert)) {
        profileData.certifications.push(cert);
        renderCertifications();
        input.value = '';
        console.log(`🏆 Added certification: ${cert}`);
      }
    }
  }

  function removeCertification(cert) {
    profileData.certifications = profileData.certifications.filter(c => c !== cert);
    renderCertifications();
    console.log(`🗑️ Removed certification: ${cert}`);
  }

  function renderCertifications() {
    const container = document.getElementById('certificationsContainer');
    container.innerHTML = profileData.certifications.map(cert => `
      <div class="tag certification">
        ${cert}
        <button class="remove-tag" onclick="removeCertification('${cert}')">&times;</button>
      </div>
    `).join('');
  }

  // Achievements management
  function addAchievement(event) {
    if (event.key === 'Enter') {
      event.preventDefault();
      const input = document.getElementById('achievementInput');
      const achievement = input.value.trim();
      if (achievement && !profileData.achievements.includes(achievement)) {
        profileData.achievements.push(achievement);
        renderAchievements();
        input.value = '';
        console.log(`🏅 Added achievement: ${achievement}`);
      }
    }
  }

  function removeAchievement(achievement) {
    profileData.achievements = profileData.achievements.filter(a => a !== achievement);
    renderAchievements();
    console.log(`🗑️ Removed achievement: ${achievement}`);
  }

  function renderAchievements() {
    const container = document.getElementById('achievementsContainer');
    container.innerHTML = profileData.achievements.map(achievement => `
      <div class="tag achievement">
        ${achievement}
        <button class="remove-tag" onclick="removeAchievement('${achievement}')">&times;</button>
      </div>
    `).join('');
  }

  // Timezone functions
  function populateTimezoneDropdown(type) {
    const optionsContainer = document.getElementById(`${type}Options`);
    optionsContainer.innerHTML = timezoneList.map(tz => `
      <div class="timezone-option" onclick="selectTimezone('${type}', '${tz.name}')">
        <div class="timezone-name">${tz.displayName}</div>
        <div class="timezone-info">${tz.offset} • ${tz.currentTime} • ${tz.abbreviation}</div>
      </div>
    `).join('');
  }

  function toggleTimezoneDropdown(type) {
    const dropdown = document.getElementById(`${type}Dropdown`);
    const isVisible = dropdown.classList.contains('show');
    // Close all dropdowns first
    document.querySelectorAll('.timezone-dropdown').forEach(dd => dd.classList.remove('show'));
    if (!isVisible) {
      populateTimezoneDropdown(type);
      dropdown.classList.add('show');
    }
  }

  function filterTimezones(type) {
    const searchTerm = event.target.value.toLowerCase();
    const optionsContainer = document.getElementById(`${type}Options`);
    const filteredTimezones = timezoneList.filter(tz => 
      tz.displayName.toLowerCase().includes(searchTerm) ||
      tz.abbreviation.toLowerCase().includes(searchTerm)
    );
    optionsContainer.innerHTML = filteredTimezones.map(tz => `
      <div class="timezone-option" onclick="selectTimezone('${type}', '${tz.name}')">
        <div class="timezone-name">${tz.displayName}</div>
        <div class="timezone-info">${tz.offset} • ${tz.currentTime} • ${tz.abbreviation}</div>
      </div>
    `).join('');
  }

  function selectTimezone(type, timezone) {
    const input = document.getElementById(`${type}Timezone`);
    const tz = timezoneList.find(t => t.name === timezone);
    if (tz) {
      input.value = `${tz.displayName} (${tz.offset})`;
      profileData[`${type}Timezone`] = timezone;
      updateCurrentTime(type, timezone);
      console.log(`🌍 Selected ${type} timezone: ${tz.displayName}`);
    }
    document.getElementById(`${type}Dropdown`).classList.remove('show');
  }

  function detectTimezone(type) {
    const detectedTimezone = moment.tz.guess();
    selectTimezone(type, detectedTimezone);
    console.log(`📍 Auto-detected timezone: ${detectedTimezone}`);
  }

  function updateCurrentTime(type, timezone) {
    const timeContainer = document.getElementById(`${type}CurrentTime`);
    if (timezone) {
      const now = moment().tz(timezone);
      const tz = timezoneList.find(t => t.name === timezone);
      timeContainer.innerHTML = `
        <div class="time-display">${now.format('dddd, MMMM Do YYYY')}</div>
        <div class="time-display">${now.format('h:mm:ss A')}</div>
        <div class="time-info">${tz.offset} • ${tz.abbreviation}</div>
      `;
      timeContainer.style.display = 'block';
    } else {
      timeContainer.style.display = 'none';
    }
  }

  function startTimeUpdates() {
    if (timeUpdateInterval) clearInterval(timeUpdateInterval);
    timeUpdateInterval = setInterval(() => {
      if (profileData.residenceTimezone) {
        updateCurrentTime('residence', profileData.residenceTimezone);
      }
      if (profileData.workTimezone) {
        updateCurrentTime('work', profileData.workTimezone);
      }
      updateViewModeTimezones();
    }, 1000);
  }

  function updateViewModeTimezones() {
    const timezoneDisplays = document.getElementById('timezoneDisplays');
    if (!timezoneDisplays) return;
    let html = '';
    if (profileData.residenceTimezone) {
      const now = moment().tz(profileData.residenceTimezone);
      const tz = timezoneList.find(t => t.name === profileData.residenceTimezone);
      html += `
        <div class="timezone-info-card">
          <div class="timezone-current-time">Residence: ${now.format('h:mm:ss A')}</div>
          <div class="timezone-details">${now.format('dddd, MMMM Do')} • ${tz ? tz.offset : ''}</div>
        </div>
      `;
    }
    if (profileData.workTimezone && profileData.workTimezone !== profileData.residenceTimezone) {
      const now = moment().tz(profileData.workTimezone);
      const tz = timezoneList.find(t => t.name === profileData.workTimezone);
      html += `
        <div class="timezone-info-card">
          <div class="timezone-current-time">Work: ${now.format('h:mm:ss A')}</div>
          <div class="timezone-details">${now.format('dddd, MMMM Do')} • ${tz ? tz.offset : ''}</div>
        </div>
      `;
    }
    timezoneDisplays.innerHTML = html;
  }

  // Render view mode
  function renderViewMode() {
    // Basic info
    document.getElementById('viewFullName').textContent = profileData.fullName || 'Name not provided';
    document.getElementById('viewDesignation').textContent = profileData.designation || 'Designation not specified';
    const orgText = profileData.orgName ? 
      `${profileData.orgName}${profileData.workingSince ? ` • Since ${new Date(profileData.workingSince).getFullYear()}` : ''}` :
      'Organization not specified';
    document.getElementById('viewOrganization').textContent = orgText;
    
    // Contact info
    document.getElementById('viewEmail').textContent = profileData.email || 'No email provided';
    document.getElementById('viewPhone').textContent = profileData.phone || 'No phone provided';
    
    // Employment details
    document.getElementById('viewEmployeeId').textContent = profileData.employeeId || 'Not specified';
    document.getElementById('viewDepartment').textContent = profileData.department || 'Not specified';
    document.getElementById('viewSalary').textContent = profileData.salary || 'Not specified';
    document.getElementById('viewJoiningDate').textContent = profileData.joiningDate ? 
      new Date(profileData.joiningDate).toLocaleDateString() : 'Not specified';
    
    // Address
    document.getElementById('viewAddress').textContent = profileData.address || 'No address provided';
    
    // Timezones
    const residenceTz = profileData.residenceTimezone ? 
      timezoneList.find(t => t.name === profileData.residenceTimezone)?.displayName : 'Not specified';
    const workTz = profileData.workTimezone ? 
      timezoneList.find(t => t.name === profileData.workTimezone)?.displayName : 'Not specified';
    document.getElementById('viewResidenceTimezone').textContent = residenceTz;
    document.getElementById('viewWorkTimezone').textContent = workTz;
    
    // Update live timezone displays
    updateViewModeTimezones();
    
    // Skills
    const allSkills = [
      ...profileData.skills.technical,
      ...profileData.skills.soft,
      ...profileData.skills.language
    ];
    const skillsContainer = document.getElementById('viewSkillsContainer');
    skillsContainer.innerHTML = allSkills.length > 0 ? 
      allSkills.map(skill => `<div class="tag view-mode">${skill}</div>`).join('') :
      '<span style="color: #666;">No skills added</span>';
    
    // Education
    document.getElementById('viewEducation').textContent = profileData.degrees || 'No education details provided';
    
    // Certifications
    const certsContainer = document.getElementById('viewCertificationsContainer');
    certsContainer.innerHTML = profileData.certifications.length > 0 ?
      profileData.certifications.map(cert => `<div class="tag certification">${cert}</div>`).join('') :
      '<span style="color: #666;">No certifications added</span>';
    
    // Achievements
    const achievementsContainer = document.getElementById('viewAchievementsContainer');
    achievementsContainer.innerHTML = profileData.achievements.length > 0 ?
      profileData.achievements.map(achievement => `<div class="tag achievement">${achievement}</div>`).join('') :
      '<span style="color: #666;">No achievements added</span>';
    
    // Photo
    if (profileData.photo) {
      document.getElementById('viewProfileAvatar').innerHTML = `<img src="${profileData.photo}" alt="Profile">`;
      // Also update header avatar promptly
      const headerAvatar = document.getElementById('headerAvatar');
      if (headerAvatar) headerAvatar.innerHTML = `<img src="${profileData.photo}" alt="Profile" />`;
    }
  }

  // Load profile data into form
  function loadProfileData() {
    // Load saved data from localStorage if exists
    const saved = localStorage.getItem('profileData');
    if (saved) {
      const loadedData = JSON.parse(saved);
      // Merge with default structure to handle legacy data
      profileData = {
        ...profileData,
        ...loadedData,
        skills: {
          technical: [],
          soft: [],
          language: [],
          ...(loadedData.skills || {})
        }
      };
      // If we have a saved photo, reflect it in both the modal and header avatar
      if (profileData.photo) {
        const profilePhoto = document.getElementById('profilePhoto');
        if (profilePhoto) profilePhoto.innerHTML = `<img src="${profileData.photo}" alt="Profile Photo">`;
        const viewAvatar = document.getElementById('viewProfileAvatar');
        if (viewAvatar) viewAvatar.innerHTML = `<img src="${profileData.photo}" alt="Profile">`;
        const headerAvatar = document.getElementById('headerAvatar');
        if (headerAvatar) headerAvatar.innerHTML = `<img src="${profileData.photo}" alt="Profile" />`;
      }
    }
    
    // Populate form fields
    document.getElementById('fullName').value = profileData.fullName || '';
    document.getElementById('email').value = profileData.email || '';
    document.getElementById('phone').value = profileData.phone || '';
    document.getElementById('employeeId').value = profileData.employeeId || '';
    document.getElementById('designation').value = profileData.designation || '';
    document.getElementById('department').value = profileData.department || '';
    document.getElementById('orgName').value = profileData.orgName || '';
    document.getElementById('salary').value = profileData.salary || '';
    document.getElementById('joiningDate').value = profileData.joiningDate || '';
    document.getElementById('workingSince').value = profileData.workingSince || '';
    document.getElementById('address').value = profileData.address || '';
    document.getElementById('degrees').value = profileData.degrees || '';
    
    // Set timezone fields
    if (profileData.residenceTimezone) {
      const tz = timezoneList.find(t => t.name === profileData.residenceTimezone);
      if (tz) {
        document.getElementById('residenceTimezone').value = `${tz.displayName} (${tz.offset})`;
        updateCurrentTime('residence', profileData.residenceTimezone);
      }
    }
    if (profileData.workTimezone) {
      const tz = timezoneList.find(t => t.name === profileData.workTimezone);
      if (tz) {
        document.getElementById('workTimezone').value = `${tz.displayName} (${tz.offset})`;
        updateCurrentTime('work', profileData.workTimezone);
      }
    }
    
    // Load photo
    if (profileData.photo) {
      document.getElementById('profilePhoto').innerHTML = `<img src="${profileData.photo}" alt="Profile Photo">`;
    }
    
    // Render all dynamic content
    renderAllSkills();
    renderCertifications();
    renderAchievements();
  }

  // Save profile data
  function saveProfile() {
    // Collect form data
    profileData.fullName = document.getElementById('fullName').value;
    profileData.designation = document.getElementById('designation').value;
    profileData.orgName = document.getElementById('orgName').value;
    profileData.workingSince = document.getElementById('workingSince').value;
    profileData.degrees = document.getElementById('degrees').value;
    profileData.email = document.getElementById('email').value;
    profileData.phone = document.getElementById('phone').value;
    profileData.employeeId = document.getElementById('employeeId').value;
    profileData.department = document.getElementById('department').value;
    profileData.salary = document.getElementById('salary').value;
    profileData.joiningDate = document.getElementById('joiningDate').value;
    profileData.address = document.getElementById('address').value;
    
    // Save to localStorage
    localStorage.setItem('profileData', JSON.stringify(profileData));
    
    // Update current user data if logged in
    const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
    if (currentUser.id) {
      // Update user data with profile information
      const updatedUser = {
        ...currentUser,
        name: profileData.fullName,
        email: profileData.email,
        phone: profileData.phone,
        designation: profileData.designation,
        department: profileData.department,
        company: profileData.orgName,
        salary: profileData.salary,
        joiningDate: profileData.joiningDate,
        address: profileData.address
      };
      localStorage.setItem('currentUser', JSON.stringify(updatedUser));
      console.log('👤 User data updated with profile information');
    }
    
    // Show success message
    console.log('💾 Profile saved successfully!');
    alert('Profile saved successfully!');
    
    // Switch to view mode after save
    switchToViewMode();
  }

  // Login state management
  let isLoggedIn = false;

  // Update header UI based on auth state, including avatar
  function updateAuthUI(loggedIn) {
    const befores = document.querySelectorAll('.before-login');
    const afters = document.querySelectorAll('.after-login');
    befores.forEach(el => el.style.display = loggedIn ? 'none' : '');
    afters.forEach(el => el.style.display = loggedIn ? 'block' : 'none');

    // Ensure profile button opens modal
    const profileBtn = document.querySelector('.after-login .nav-profile-btn');
    if (profileBtn) profileBtn.onclick = openProfileModal;

    // Update header avatar image
    const headerAvatar = document.getElementById('headerAvatar');
    if (headerAvatar) {
      const user = JSON.parse(localStorage.getItem('currentUser') || '{}');
      const photo = (profileData && profileData.photo) ? profileData.photo : null;
      headerAvatar.innerHTML = photo
        ? `<img src="${photo}" alt="Profile" />`
        : `<span class="material-icons">person</span>`;
      // Add role-based ring color (optional)
      headerAvatar.setAttribute('data-role', currentLoginType);
    }
  }

  function handleSuccessfulLogin() {
    isLoggedIn = true;
    document.body.classList.add('logged-in');
    updateAuthUI(true);
    console.log('✅ User logged in successfully - Profile now available');
    
    // Close login modal if open
    if (loginBackdrop) loginBackdrop.classList.remove('show');
    
    // Pre-fill profile with login data
    prefillProfileFromLogin();
    
    // Hide any warnings/errors and do not show success banner unnecessarily
    hideAllMessages();
  }

  function handleLogout() {
    isLoggedIn = false;
    document.body.classList.remove('logged-in');
    updateAuthUI(false);
    console.log('👋 User logged out - Profile hidden');
    
    // Clear login state
    localStorage.removeItem('isLoggedIn');
    localStorage.removeItem('currentUser');
    
    // Close profile modal if open
    closeProfileModal();
    
    // Show logout message
    showLogoutMessage();
    
    // Optional: Clear profile data on logout
    // localStorage.removeItem('profileData'); // Uncomment if you want to clear profile on logout
  }

  function prefillProfileFromLogin() {
    const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
    if (currentUser.id) {
      // Pre-fill profile data with login information
      profileData.fullName = currentUser.name || '';
      profileData.email = currentUser.email || currentUser.loginId || '';
      profileData.designation = currentUser.role || '';
      profileData.orgName = currentUser.company || '';
      profileData.department = currentUser.department || '';
      profileData.employeeId = currentUser.id || '';
      profileData.phone = currentUser.phone || '';
      profileData.salary = currentUser.salary || '';
      profileData.joiningDate = currentUser.joiningDate || '';
      profileData.address = currentUser.address || '';
      
      // Save pre-filled data
      localStorage.setItem('profileData', JSON.stringify(profileData));
      
      console.log('📋 Profile pre-filled with login data:', profileData);
    }
  }

  function showLoginSuccess() {
    // Create a temporary success message
    const successMsg = document.createElement('div');
    successMsg.style.cssText = `
      position: fixed;
      top: 20px;
      right: 20px;
      background: #28a745;
      color: white;
      padding: 1rem 1.5rem;
      border-radius: 8px;
      font-weight: 600;
      z-index: 2000;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      transform: translateX(400px);
      transition: transform 0.3s ease;
    `;
    successMsg.textContent = '✅ Login successful! Profile is now available.';
    document.body.appendChild(successMsg);
    
    // Animate in
    setTimeout(() => {
      successMsg.style.transform = 'translateX(0)';
    }, 100);
    
    // Remove after 4 seconds
    setTimeout(() => {
      successMsg.style.transform = 'translateX(400px)';
      setTimeout(() => {
        if (successMsg.parentNode) {
          successMsg.parentNode.removeChild(successMsg);
        }
      }, 300);
    }, 4000);
  }

  function showLogoutMessage() {
    const logoutMsg = document.createElement('div');
    logoutMsg.style.cssText = `
      position: fixed;
      top: 20px;
      right: 20px;
      background: #dc3545;
      color: white;
      padding: 1rem 1.5rem;
      border-radius: 8px;
      font-weight: 600;
      z-index: 2000;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      transform: translateX(400px);
      transition: transform 0.3s ease;
    `;
    logoutMsg.textContent = '👋 Logged out successfully!';
    document.body.appendChild(logoutMsg);
    
    // Animate in
    setTimeout(() => {
      logoutMsg.style.transform = 'translateX(0)';
    }, 100);
    
    // Remove after 3 seconds
    setTimeout(() => {
      logoutMsg.style.transform = 'translateX(400px)';
      setTimeout(() => {
        if (logoutMsg.parentNode) {
          logoutMsg.parentNode.removeChild(logoutMsg);
        }
      }, 300);
    }, 3000);
  }



  // Initialize profile system on page load
  document.addEventListener('DOMContentLoaded', function() {
    // Initialize timezone data when moment.js is loaded
    if (typeof moment !== 'undefined' && moment.tz) {
      initializeTimezones();
      console.log('🌍 Timezone data initialized');
    } else {
      console.warn('⚠️ Moment.js timezone not loaded');
    }
    
    // Check if user was previously logged in
    const wasLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
    if (wasLoggedIn) {
      // Restore quietly without showing warnings/loaders
      document.body.classList.add('logged-in');
      updateAuthUI(true);
      hideAllMessages();
      prefillProfileFromLogin();
      console.log('🔄 Restored login state from previous session');
    }
  });

  // Close profile modal when clicking outside
  document.addEventListener('click', function(e) {
    const profileModal = document.getElementById('profileModal');
    if (profileModal && e.target === profileModal) {
      closeProfileModal();
    }
    
    // Close timezone dropdowns when clicking outside
    if (!e.target.closest('.timezone-selector')) {
      document.querySelectorAll('.timezone-dropdown').forEach(dd => dd.classList.remove('show'));
    }
  });



  // Console Commands for Database Access (for development/testing)
  window.OrbisDB = {
    // View all data
    viewAll: () => {
      console.log('🗄️ Complete Orbisyn Database:', orbisyn_database);
      return orbisyn_database;
    },
    
    // View specific data types
    viewUsers: () => {
      console.log('👥 All Users:', orbisyn_database.users);
      return orbisyn_database.users;
    },
    
    viewSubmissions: (type = null) => {
      if (type) {
        console.log(`📝 ${type} Submissions:`, orbisyn_database.submissions[type]);
        return orbisyn_database.submissions[type];
      }
      console.log('📝 All Submissions:', orbisyn_database.submissions);
      return orbisyn_database.submissions;
    },
    
    viewLogs: (category = null) => {
      if (category) {
        console.log(`📋 ${category} Logs:`, orbisyn_database.logs[category]);
        return orbisyn_database.logs[category];
      }
      console.log('📋 All Logs:', orbisyn_database.logs);
      return orbisyn_database.logs;
    },
    
    // Get statistics
    stats: () => {
      const stats = DatabaseManager.getStats();
      console.log('📊 Database Statistics:', stats);
      return stats;
    },
    
    // Export data
    export: () => {
      DatabaseManager.exportData();
      console.log('💾 Database exported to file');
    },
    
    // Clear specific data (for testing)
    clearSubmissions: (type = null) => {
      if (type && orbisyn_database.submissions[type]) {
        orbisyn_database.submissions[type] = [];
        console.log(`🗑️ Cleared ${type} submissions`);
      } else {
        Object.keys(orbisyn_database.submissions).forEach(key => {
          orbisyn_database.submissions[key] = [];
        });
        console.log('🗑️ Cleared all submissions');
      }
      DatabaseManager.save();
    },
    
    clearLogs: (category = null) => {
      if (category && orbisyn_database.logs[category]) {
        orbisyn_database.logs[category] = [];
        console.log(`🗑️ Cleared ${category} logs`);
      } else {
        Object.keys(orbisyn_database.logs).forEach(key => {
          orbisyn_database.logs[key] = [];
        });
        console.log('🗑️ Cleared all logs');
      }
      DatabaseManager.save();
    },
    
    // Reset database
    reset: () => {
      localStorage.removeItem('orbisyn_database');
      console.log('🔄 Database reset - refresh page to reinitialize');
    },
    
    // Help
    help: () => {
      console.log(`
🗄️ Orbisyn Database Console Commands:

📊 Data Viewing:
  OrbisDB.viewAll()                    - View complete database
  OrbisDB.viewUsers()                  - View all users
  OrbisDB.viewSubmissions()            - View all form submissions
  OrbisDB.viewSubmissions('getStarted') - View specific form type
  OrbisDB.viewLogs()                   - View all logs
  OrbisDB.viewLogs('security')         - View specific log category

📈 Statistics:
  OrbisDB.stats()                      - View database statistics

💾 Data Management:
  OrbisDB.export()                     - Export database to JSON file
  OrbisDB.clearSubmissions()           - Clear all submissions
  OrbisDB.clearSubmissions('getStarted') - Clear specific form submissions
  OrbisDB.clearLogs()                  - Clear all logs
  OrbisDB.reset()                      - Reset entire database

❓ Help:
  OrbisDB.help()                       - Show this help message
      `);
    }
  };

  // Log available console commands
  console.log('🗄️ Orbisyn Database System Initialized!');
  console.log('💡 Type OrbisDB.help() for available commands');
  console.log('📊 Current stats:', DatabaseManager.getStats());

  // Open login modal when Login button is clicked
  loginBtn.addEventListener('click', () => {
    loginBackdrop.classList.add('show');
    testCredentials.classList.add('show');
    // Reset form
    resetLoginForm();
    // Focus on first input
    setTimeout(() => loginField.focus(), 100);
  });

  // Close login modal
  function closeLoginModal() {
    loginBackdrop.classList.remove('show');
    testCredentials.classList.remove('show');
    resetLoginForm();
  }

  function resetLoginForm() {
    loginField.value = '';
    passwordField.value = '';
    errorMessage.classList.remove('show');
    attemptWarning.classList.remove('show');
    successMessage.classList.remove('show');
    attemptCount = 0;
    loginSubmitBtn.disabled = false;
    loginSubmitBtn.style.opacity = '1';
    loginSubmitBtn.style.cursor = 'pointer';
    passwordField.type = 'password';
    passwordToggle.querySelector('.material-icons').textContent = 'visibility';
  }

  loginCloseBtn.addEventListener('click', closeLoginModal);

  // Close modal when clicking on backdrop
  loginBackdrop.addEventListener('click', (e) => {
    if (e.target === loginBackdrop) {
      closeLoginModal();
    }
  });

  // Toggle between employer and employee login
  loginToggleBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      loginToggleBtns.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      currentLoginType = btn.dataset.type;
      updateLoginForm();
      // Reset warnings when switching
      hideAllMessages();
      attemptCount = 0;
      resetLoginButton();
    });
  });

  function updateLoginForm() {
    if (currentLoginType === 'employer') {
      loginTitle.textContent = 'Please sign in';
      loginLabel.textContent = 'Email Address';
      loginField.type = 'email';
      loginField.placeholder = 'Enter your company email';
      loginBtnText.textContent = 'Sign in to OrbiWave';
      // Update security guidelines for employers
      securityGuidelines.innerHTML = `
        <li>Use your official company email address</li>
        <li>Ensure you're on a secure network connection</li>
        <li>Never share your login credentials</li>
        <li>Log out completely when finished</li>
      `;
      // Hide forgot username link for employer
      forgotUsername.style.display = 'none';
      registerText.textContent = 'Not Registered Yet?';
      registerDescription.textContent = 'If the business you work for is a client of Orbisyn, please click the link below to register.';
      registerLink.innerHTML = '<span class="material-icons">person_add</span><span>Register Now</span>';
      passwordRequirements.textContent = 'Minimum 8 characters, including uppercase, lowercase, number and special character.';
    } else {
      loginTitle.textContent = 'Employee Login';
      loginLabel.textContent = 'Username';
      loginField.type = 'text';
      loginField.placeholder = 'Enter your username';
      loginBtnText.textContent = 'Sign in to OrbiFlex';
      // Update security guidelines for employees
      securityGuidelines.innerHTML = `
        <li>Use your assigned employee username</li>
        <li>Access only from approved devices</li>
        <li>Report suspicious activity immediately</li>
        <li>Log out when leaving your workstation</li>
      `;
      // Show forgot username link for employee
      forgotUsername.style.display = 'flex';
      registerText.textContent = 'New to Orbisyn Flex?';
      registerDescription.textContent = 'Contact your HR department for account setup assistance.';
      registerLink.innerHTML = '<span class="material-icons">person_add</span><span>Sign up</span>';
      passwordRequirements.textContent = 'Must meet company password policy requirements. Contact IT support for assistance.';
    }
  }

  // Password toggle functionality (guard against missing elements)
  if (passwordToggle && passwordField) {
    passwordToggle.addEventListener('click', () => {
      const icon = passwordToggle.querySelector('.material-icons');
      if (passwordField.type === 'password') {
        passwordField.type = 'text';
        if (icon) icon.textContent = 'visibility_off';
      } else {
        passwordField.type = 'password';
        if (icon) icon.textContent = 'visibility';
      }
    });
  }

  // Main Screen Loading Animation Controller
  const mainLoadingOverlay = document.getElementById('mainLoadingOverlay');
  const mainLoadingMessage = document.getElementById('mainLoadingMessage');
  const mainLoadingSubmessage = document.getElementById('mainLoadingSubmessage');
  const mainLoadingProgressBar = document.getElementById('mainLoadingProgressBar');

  function showMainLoader(type = 'authenticating') {
    mainLoadingOverlay.classList.add('show');
    
    const messages = {
      authenticating: {
        message: 'Authenticating your credentials...',
        submessage: 'Please wait while we verify your access',
        color: '#007bff'
      },
      employer: {
        message: 'Connecting to OrbiWave...',
        submessage: 'Preparing your employer dashboard',
        color: '#28a745'
      },
      employee: {
        message: 'Connecting to OrbiFlex...',
        submessage: 'Loading your employee portal',
        color: '#17a2b8'
      },
      failed: {
        message: 'Authentication failed',
        submessage: 'Please check your credentials',
        color: '#dc3545'
      },
      locked: {
        message: 'Account security check...',
        submessage: 'Verifying account status',
        color: '#ffc107'
      }
    };
    
    const config = messages[type] || messages.authenticating;
    mainLoadingMessage.textContent = config.message;
    mainLoadingSubmessage.textContent = config.submessage;
    
    // Update loader color
    document.documentElement.style.setProperty('--uib-color', config.color);
    
    // Animate progress bar
    mainLoadingProgressBar.style.width = '0%';
    setTimeout(() => {
      mainLoadingProgressBar.style.width = '100%';
    }, 100);
  }

  function hideMainLoader() {
    mainLoadingOverlay.classList.remove('show');
    mainLoadingProgressBar.style.width = '0%';
  }

  // Legacy function for backward compatibility
  function showLoginLoader(type) {
    showEnhancedLoader(type);
  }

  function hideLoginLoader() {
    hideMainLoader();
  }

  // Enhanced form submission with conditional loading states
  loginForm.addEventListener('submit', (e) => {
    e.preventDefault();
    console.log('🔍 Login form submitted');
    console.log('📝 Current login type:', currentLoginType);
    console.log('📧 Login field value:', loginField.value);
    console.log('🔒 Password field has value:', !!passwordField.value);
    
    // Basic form validation
    if (!loginField.value.trim() || !passwordField.value.trim()) {
      showError('Please fill in all required fields.');
      DatabaseManager.log('errors', 'Login form validation failed - empty fields');
      return;
    }
    
    // Hide all messages and start enhanced loading
    hideAllMessages();
    
    // Check credentials from database
    const users = orbisyn_database.users[currentLoginType];
    const loginValue = loginField.value.trim();
    const passwordValue = passwordField.value.trim();
    let user = null;
    
    if (currentLoginType === 'employer') {
      user = users.find(u => u.email.toLowerCase() === loginValue.toLowerCase() && u.password === passwordValue && u.status === 'active');
    } else {
      user = users.find(u => u.username === loginValue && u.password === passwordValue && u.status === 'active');
    }
    
    if (user) {
      // Close login modal first
      if (loginBackdrop) loginBackdrop.classList.remove('show');
      
      // Successful login - Use enhanced main screen loader
      if (loaderConfig.conditions.SHOW_ON_LOGIN) {
        showConditionalLoader(currentLoginType, 'login', {
          callback: onLoginComplete
        });
      } else {
        // Skip loader if disabled
        onLoginComplete();
      }

      function onLoginComplete() {
        // Record successful login
        const loginId = DatabaseManager.recordLoginAttempt(currentLoginType, loginValue, true, user);
        const platformName = currentLoginType === 'employer' ? 'OrbiWave' : 'OrbiFlex';
        
        // Reset attempt count
        attemptCount = 0;
        
        DatabaseManager.log('security', `Successful login for ${user.name} (${user.role})`, {
          loginId: loginId,
          userId: user.id,
          platform: platformName
        });
        
        console.log(`✅ Successfully logged in as ${user.role} on ${platformName}`);
        
        // Handle successful login state change immediately
        handleSuccessfulLogin();
        // Store login state and user data
        localStorage.setItem('isLoggedIn', 'true');
        localStorage.setItem('currentUser', JSON.stringify(user));
      }
      
    } else {
      // Failed login - Record attempt first
      DatabaseManager.recordLoginAttempt(currentLoginType, loginValue, false);
      attemptCount++;
      
      if (attemptCount >= 5) {
        // Account locked
        showConditionalLoader(currentLoginType, 'account_locked', {
          callback: () => {
            showError('Account has been locked due to too many failed attempts. Please contact your system administrator.');
            disableLoginButton();
            DatabaseManager.log('security', `Account locked due to failed attempts for ${loginValue}`, {
              attemptCount: attemptCount,
              loginType: currentLoginType
            });
          }
        });
      } else {
        // Regular failed login
        showConditionalLoader(currentLoginType, 'failed_login', {
          callback: () => {
            // Only show attempt warning from the 3rd failed attempt onwards
            if (attemptCount >= 3 && attemptCount < 5) {
              attemptWarning.classList.add('show');
              DatabaseManager.log('security', `Multiple failed login attempts for ${loginValue}`, {
                attemptCount: attemptCount,
                loginType: currentLoginType
              });
            }
            
            showError('Invalid credentials. Please check your login information and try again.');
            DatabaseManager.log('security', `Failed login attempt for ${loginValue}`, {
              attemptCount: attemptCount,
              loginType: currentLoginType
            });
          }
        });
      }
    }
  });

  // Utility functions for enhanced login (guard against missing elements)
  function showError(message) {
    hideAllMessages();
    if (errorMessage) {
      const target = errorMessage.querySelector('span:last-child') || errorMessage;
      target.textContent = message;
      errorMessage.classList.add('show');
    }
  }

  function showSuccess(message) {
    hideAllMessages();
    if (successMessage) {
      const target = successMessage.querySelector('span:last-child') || successMessage;
      target.textContent = message;
      successMessage.classList.add('show');
    }
  }

  function hideAllMessages() {
    if (errorMessage) errorMessage.classList.remove('show');
    if (attemptWarning) attemptWarning.classList.remove('show');
    if (successMessage) successMessage.classList.remove('show');
  }

  function disableLoginButton() {
    loginSubmitBtn.disabled = true;
    loginSubmitBtn.style.opacity = '0.5';
    loginSubmitBtn.style.cursor = 'not-allowed';
  }

  function resetLoginButton() {
    loginSubmitBtn.disabled = false;
    loginSubmitBtn.style.opacity = '1';
    loginSubmitBtn.style.cursor = 'pointer';
  }

  // Forgot Username functionality
  forgotUsername.addEventListener('click', (e) => {
    e.preventDefault();
    const userList = orbisyn_database.users.employee.map(u => `• ${u.username} (${u.name})`).join('\n');
    alert(`📋 Available Employee Usernames:\n\n${userList}\n\n💡 Contact your HR department if you need assistance.`);
    DatabaseManager.log('formSubmissions', 'Forgot username request', { loginType: currentLoginType });
  });

  // Forgot Password functionality with enhanced loader
  forgotPassword.addEventListener('click', (e) => {
    e.preventDefault();
    
    // Show password reset loader
    showConditionalLoader(currentLoginType, 'password_reset', {
      callback: () => {
        const message = currentLoginType === 'employer' 
          ? '🔑 Password Reset Request\n\nFor security reasons, employer password resets must be handled by your IT administrator.\n\n📞 Please contact your IT support team with:\n• Your email address\n• Employee ID or company information\n• Reason for password reset\n\n🔒 A secure reset link will be sent to your registered email.'
          : '🔑 Password Reset Request\n\nFor security reasons, employee password resets must be handled by your HR department.\n\n📞 Please contact your HR team with:\n• Your username\n• Employee ID\n• Department information\n\n🔒 Your password will be reset and provided securely.';
        
        alert(message);
        
        // Record the request
        DatabaseManager.recordSubmission('passwordReset', {
          loginType: currentLoginType,
          requestedBy: loginField.value.trim() || 'unknown',
          timestamp: new Date().toISOString()
        });
        DatabaseManager.log('security', 'Password reset requested', { 
          loginType: currentLoginType,
          identifier: loginField.value.trim() || 'unknown'
        });
      }
    });
  });

  // Sign Up functionality with enhanced loader
  registerLink.addEventListener('click', (e) => {
    e.preventDefault();
    
    if (currentLoginType === 'employer') {
      // Employer registration
      const companyName = prompt('🏢 Company Registration\n\nPlease enter your company name:');
      if (companyName && companyName.trim()) {
        const contactEmail = prompt('📧 Please enter your business email address:');
        if (contactEmail && contactEmail.trim()) {
          
          // Show registration loader
          showConditionalLoader(currentLoginType, 'registration', {
            callback: () => {
              const registrationData = {
                type: 'employer',
                companyName: companyName.trim(),
                contactEmail: contactEmail.trim(),
                status: 'pending',
                requestedFeatures: ['payroll', 'hr-management', 'reporting']
              };
              
              DatabaseManager.recordSubmission('registrations', registrationData);
              alert(`✅ Registration Request Submitted!\n\n🏢 Company: ${companyName}\n📧 Email: ${contactEmail}\n\n📞 A sales representative will contact you within 24 hours to:\n• Discuss your payroll needs\n• Provide custom pricing\n• Schedule a demo\n• Set up your account\n\n🆔 Reference: ${Date.now().toString().slice(-6)}`);
            }
          });
        }
      }
    } else {
      // Employee registration - simpler process
      showConditionalLoader(currentLoginType, 'registration', {
        callback: () => {
          alert(`👥 Employee Account Setup\n\n🏢 Employee accounts are created by your HR department.\n\n📞 Please contact your HR team with:\n• Your full name\n• Employee ID\n• Department\n• Start date\n• Manager's name\n\n💡 Your HR team will:\n• Create your OrbiFlex account\n• Provide your username and temporary password\n• Set up your payroll and benefits access\n• Schedule orientation if needed\n\n📧 You'll receive login credentials via your company email once your account is ready.`);
          
          DatabaseManager.recordSubmission('registrations', {
            type: 'employee',
            status: 'info-requested',
            timestamp: new Date().toISOString()
          });
        }
      });
    }
    
    DatabaseManager.log('formSubmissions', 'Registration request', { 
      loginType: currentLoginType 
    });
  });

  // Initialize login form
  updateLoginForm();

  // Add Escape key support for login modal
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && loginBackdrop.classList.contains('show')) {
      closeLoginModal();
    }
  });
</script>
</body>
</html>
